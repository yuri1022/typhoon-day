"use strict";(self.webpackChunktyphoon=self.webpackChunktyphoon||[]).push([[9241],{65460:(t,e,n)=>{n.d(e,{BI:()=>v,D3:()=>y,XJ:()=>f,lc:()=>h,mX:()=>g,rU:()=>m,tH:()=>S});var r=n(88685);const i="__begin__",o="__end__",s=new RegExp(i,"ig"),a=new RegExp(o,"ig"),c=new RegExp("^"+i,"i"),u=new RegExp(o+"$","i"),l='"',d=l+" + ",p=" + "+l;function h(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function y(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function f(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):null!=t.labelExpression&&(e.expression=h(t.labelExpression),e.type="conventional"),e}function v(t){const e=f(t);if(!e)return null;switch(e.type){case"conventional":return g(e.expression);case"arcade":return e.expression}return null}function m(t){const e=f(t);if(!e)return null;switch(e.type){case"conventional":return function(t){const e=null===t||void 0===t?void 0:t.match(b);return(null===e||void 0===e?void 0:e[1].trim())||null}(e.expression);case"arcade":return S(e.expression)}return null}function g(t){let e;return t?(e=(0,r.HC)(t,(t=>i+'$feature["'+t+'"]'+o)),e=c.test(e)?e.replace(c,""):l+e,e=u.test(e)?e.replace(u,""):e+l,e=e.replaceAll(s,d).replaceAll(a,p)):e='""',e}const b=/^\s*\{([^}]+)\}\s*$/i;const _=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,w=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,x=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function S(t){if(!t)return null;let e=_.exec(t)||w.exec(t);return e?e[1]||e[3]:(e=x.exec(t),e?e[2]:null)}},77555:(t,e,n)=>{n.d(e,{$:()=>r,s:()=>i});const r=15.5,i=1024},23758:(t,e,n)=>{n.d(e,{KQ:()=>r,Q4:()=>o,Ss:()=>s});const r=8388607,i=8388608,o=t=>t&r;function s(t,e){return((e?i:0)|t)>>>0}},94047:(t,e,n)=>{n.d(e,{Y7:()=>O,HS:()=>E,mm:()=>U,A:()=>K,k2:()=>L,ZA:()=>D,E8:()=>z,hF:()=>C,C5:()=>F,uK:()=>k,Pi:()=>V});var r=n(35143),i=(n(81806),n(76460)),o=n(88685),s=n(50076),a=n(24245),c=n(86994);class u{constructor(){this._includedModules=new Map}include(t,e){this._includedModules.has(t)?this._includedModules.get(t):(this._includedModules.set(t,e),t(this.builder,e))}}class l extends u{constructor(){super(...arguments),this.vertex=new h,this.fragment=new h,this.attributes=new y,this.varyings=new f,this.extensions=new v,this.constants=new m}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.extensions.generateSource(t),r=this.attributes.generateSource(t),i=this.varyings.generateSource(t),o="vertex"===t?this.vertex:this.fragment,s=o.uniforms.generateSource(),a=o.code.generateSource(),c="vertex"===t?g:function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif\n".concat(t?"out vec4 fragColor;":"","\n")}(e),u=this.constants.generateSource().concat(o.constants.generateSource());return"".concat(e?"#version 300 es":"","\n").concat(n.join("\n"),"\n").concat(c,"\n").concat(u.join("\n"),"\n").concat(s.join("\n"),"\n").concat(r.join("\n"),"\n").concat(i.join("\n"),"\n").concat(a.join("\n"))}generateBindPass(t){const e=new Map;this.vertex.uniforms.entries.forEach((t=>{const n=t.bind[a.c.Pass];n&&e.set(t.name,n)})),this.fragment.uniforms.entries.forEach((t=>{const n=t.bind[a.c.Pass];n&&e.set(t.name,n)}));const n=Array.from(e.values()),r=n.length;return(e,i)=>{for(let o=0;o<r;++o)n[o](t,e,i)}}generateBindDraw(t){const e=new Map;this.vertex.uniforms.entries.forEach((t=>{const n=t.bind[a.c.Draw];n&&e.set(t.name,n)})),this.fragment.uniforms.entries.forEach((t=>{const n=t.bind[a.c.Draw];n&&e.set(t.name,n)}));const n=Array.from(e.values()),r=n.length;return(e,i,o)=>{for(let s=0;s<r;++s)n[s](t,e,i,o)}}}class d{constructor(){this._entries=new Map}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)this._add(r)}get(t){return this._entries.get(t)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new s.A("Duplicate uniform name ".concat(t.name," for different uniform type"));this._entries.set(t.name,t)}else i.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder").error("Trying to add null Uniform from ".concat((new Error).stack,"."))}generateSource(){return Array.from(this._entries.values()).map((t=>null!=t.arraySize?"uniform ".concat(t.type," ").concat(t.name,"[").concat(t.arraySize,"];"):"uniform ".concat(t.type," ").concat(t.name,";")))}get entries(){return Array.from(this._entries.values())}}class p{constructor(){this._entries=new Array}add(t){this._entries.push(t)}generateSource(){return this._entries}}class h extends u{constructor(){super(...arguments),this.uniforms=new d,this.code=new p,this.constants=new m}get builder(){return this}}class y{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map((t=>"in ".concat(t[1]," ").concat(t[0],";")))}}class f{constructor(){this._entries=new Map}add(t,e){this._entries.has(t)&&(0,c.vA)(this._entries.get(t)===e),this._entries.set(t,e)}generateSource(t){const e=new Array;return this._entries.forEach(((n,r)=>e.push("vertex"===t?"out ".concat(n," ").concat(r,";"):"in ".concat(n," ").concat(r,";")))),e}}class v{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const e="vertex"===t?v.ALLOWLIST_VERTEX:v.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((t=>e.includes(t))).map((t=>"#extension ".concat(t," : enable")))}}v.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],v.ALLOWLIST_VERTEX=[];class m{constructor(){this._entries=new Set}add(t,e,n){let r="ERROR_CONSTRUCTOR_STRING";switch(e){case"float":r=m._numberToFloatStr(n);break;case"int":r=m._numberToIntStr(n);break;case"bool":r=n.toString();break;case"vec2":r="vec2(".concat(m._numberToFloatStr(n[0]),",                            ").concat(m._numberToFloatStr(n[1]),")");break;case"vec3":r="vec3(".concat(m._numberToFloatStr(n[0]),",                            ").concat(m._numberToFloatStr(n[1]),",                            ").concat(m._numberToFloatStr(n[2]),")");break;case"vec4":r="vec4(".concat(m._numberToFloatStr(n[0]),",                            ").concat(m._numberToFloatStr(n[1]),",                            ").concat(m._numberToFloatStr(n[2]),",                            ").concat(m._numberToFloatStr(n[3]),")");break;case"ivec2":r="ivec2(".concat(m._numberToIntStr(n[0]),",                             ").concat(m._numberToIntStr(n[1]),")");break;case"ivec3":r="ivec3(".concat(m._numberToIntStr(n[0]),",                             ").concat(m._numberToIntStr(n[1]),",                             ").concat(m._numberToIntStr(n[2]),")");break;case"ivec4":r="ivec4(".concat(m._numberToIntStr(n[0]),",                             ").concat(m._numberToIntStr(n[1]),",                             ").concat(m._numberToIntStr(n[2]),",                             ").concat(m._numberToIntStr(n[3]),")");break;case"mat2":case"mat3":case"mat4":r="".concat(e,"(").concat(Array.prototype.map.call(n,(t=>m._numberToFloatStr(t))).join(", "),")")}return this._entries.add("const ".concat(e," ").concat(t," = ").concat(r,";")),this}static _numberToIntStr(t){return t.toFixed(0)}static _numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}const g="precision highp float;\nprecision highp sampler2D;";var b=n(60984);function _(t,e,n){const r=e.split("\n");for(const i of r)if(i.trim().length){{let e="";null!=n&&(e+="/*id:".concat(null!==n&&void 0!==n?n:"000","*/   ")),t.body+=e.padEnd(14)}t.body+=" ".repeat(t.indent)+i+"\n"}}class w{write(t){for(const e of t.rootOutputNodes())t.shouldPruneOutputNode(e)||(e.variableName=this._write(t,e.node));return t}_createVarName(t,e){let n="";return"boolean"!=typeof e&&"number"!=typeof e&&e.debugInfo.name&&(n="".concat(e.debugInfo.name,"_")),"".concat(n,"v").concat(t.varCount++)}_write(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"==typeof e)return e.toString();if("boolean"==typeof e)return e.toString();let r=t.getEmit(e);if(r)return r;switch(e.shaderType){case"scope-node":r=this._writeScopeNode(t,e);break;case"primitive-node":r=this._writePrimitiveNode(t,e,n);break;case"function-node":r=this._writeFunctionNode(t,e);break;case"property-access-node":r=this._writePropertyAccessNode(t,e);break;case"text-node":r=e.text;break;case"block-node":r=this._writeBlockNode(t,e);break;case"condition-node":r=this._writeConditionNode(t,e)}return t.setEmit(e,r),r}_writeScopeNode(t,e){const n=new e.child.constructor;n.setDebugName(e.debugInfo.name);const r=this._write(t,n,!0);return _(t,"{ /*ScopeStart: ".concat(e.uid," ").concat(e.debugInfo.name,"*/")),t.indent+=2,_(t,"".concat(r," = ").concat(this._write(t,e.child),";")),t.indent-=2,_(t,"} /*ScopeEnd: ".concat(e.uid," ").concat(e.debugInfo.name,"*/")),r}_writeConditionNode(t,e){const n=new e.ifTrue.constructor,r=this._write(t,n,!0);_(t,"if (".concat(this._write(t,e.condition),") {")),t.indent+=2;const i=t.createSubgraphContext(),o=this._write(i,e.ifTrue);if(t.body+=i.body,o&&_(t,"".concat(r," = ").concat(o,";")),t.indent-=2,_(t,"}"),e.ifFalse){_(t,"else {"),t.indent+=2;const n=t.createSubgraphContext(),i=this._write(n,e.ifFalse);t.body+=n.body,i&&_(t,"".concat(r," = ").concat(i,";")),t.indent-=2,_(t,"}")}return r}_writeBlockNode(t,e){const{captureList:n,generator:r,returnType:i}=e,o={};for(const u in n){if(!n[u])continue;const e=this._write(t,n[u]);o[u]=e}const s=new i,a=this._write(t,s,!0);if(o.out=a,e.subgraph){const n=t.createSubgraphContext(),r=this._write(n,e.subgraph.child),i=n.body;o.subgraph={varName:r,body:i}}const c=r(o);return _(t,"{\n"),t.indent+=2,_(t,c),t.indent-=2,_(t,"}\n"),a}_writePropertyAccessNode(t,e){const n=this._write(t,e.target);return"string"==typeof e.property&&e.property.includes("[")?"".concat(n).concat(e.property):"string"!=typeof e.property?"".concat(n,"[").concat(this._write(t,e.property),"]"):"".concat(n,".").concat(e.property)}_writeFunctionNode(t,e){const n=e.returnType.type;if(e.isInfix){const[r,i]=e.children.map((e=>this._write(t,e))),o=this._createVarName(t,e);return _(t,"".concat(n.padEnd(5)," ").concat(o," = ").concat(r," ").concat(e.token," ").concat(i,";"),e.uid),o}const r=e.children.map((e=>this._write(t,e))).join(", "),i=this._createVarName(t,e);return _(t,"".concat(n.padEnd(5)," ").concat(i," = ").concat(e.token,"(").concat(r,");"),e.uid),i}_writePrimitiveNode(t,e){var n;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=t.getInput(e);if(i)return i.isUsed=!0,i.variableName;const o=1===e.children.length&&(null===(n=e.children[0])||void 0===n?void 0:n.type)===e.type;if(e.isImplicit||o)return this._write(t,e.children[0]);const s=this._createVarName(t,e);if(r)return _(t,"".concat(e.type.padEnd(5)," ").concat(s,";"),e.uid),s;const a=!e.debugInfo.name&&!e.isMutable;if(a&&"float"===e.type&&"number"==typeof e.children[0])return Number.isInteger(e.children[0])?e.children[0].toFixed(1):e.children[0].toString();if(a&&"int"===e.type&&"number"==typeof e.children[0]&&Number.isInteger(e.children[0]))return e.children[0].toString();const c=e.children.map((e=>this._write(t,e))).join(", ");return"array"===e.type?(_(t,"".concat(e.type.padEnd(5)," ").concat(s," = [").concat(c,"];"),e.uid),s):a?"".concat(e.type,"(").concat(c,")"):(_(t,"".concat(e.type.padEnd(5)," ").concat(s," = ").concat(e.type,"(").concat(c,");"),e.uid),s)}}var x=n(22881);class S{constructor(t,e,n){this.variableName=t,this.variableInputType=e,this.node=n,this.type="shader-input",this.isUsed=!1}clone(){return new S(this.variableName,this.variableInputType,(0,x.vA)(this.node))}}class T{constructor(t,e,n){this.outVariableName=t,this.outVariableType=e,this.node=n,this.type="shader-output"}clone(){const t=new T(this.outVariableName,this.outVariableType,(0,x.vA)(this.node));return t.variableName=this.variableName,t}}class A{static createVertex(t,e,n,r,i,o){const s=[];for(const c in t){const e=t[c],r=n.get(c);r?s.push(new S(r,"builtin",e)):s.push(new S("a_"+c,"attribute",e))}for(const c of r){const t=c.uniformHydrated;s.push(new S(c.uniformName,"uniform",t))}const a=[];for(const c in e){const t=e[c];"glPosition"===c?a.push(new T("gl_Position","builtin",t)):"glPointSize"===c?a.push(new T("gl_PointSize","builtin",t)):a.push(new T("v_"+c,"varying",t))}return new A(s,a,i,o)}static createFragment(t,e,n,r,i,o){const s=[],a=Array.from(i.rootOutputNodes());for(const u in t){const e=t[u],r=n.get(u);if(r){s.push(new S(r,"builtin",e));continue}const i=a.find((t=>t.node===e));i&&s.push(new S(i.outVariableName,i.outVariableType,e))}for(const u of r){const t=u.uniformHydrated;s.push(new S(u.uniformName,"uniform",t))}const c=[];for(const u in e){const t=e[u],r=n.get(u);if("discard"===u)c.push(new T(null,"discard",t));else{if(!r)throw new Error("Member ".concat(u," in shader fragment output shoule be tagged as builtin"));c.push(new T(r,"builtin",t))}}return new A(s,c,o)}constructor(t,e,n,r){this.type="shader-graph-context",this.indent=0,this.body="",this.varCount=0,this._inputShaderTypesByNodeUid=new Map,this._nodeEmitMap=new Map;for(const i of t)this._inputShaderTypesByNodeUid.set(i.node.uid,i);this._outputShaderTypes=e,this._transformFeedbackBindings=n,this._transformFeedbackNames=new Set(n.map((t=>"v_"+t.propertyKey))),this._usedInFragmentShader=r}shouldPruneOutputNode(t){return!!this._usedInFragmentShader&&"builtin"!==t.outVariableType&&!this._transformFeedbackNames.has(t.outVariableName)&&!this._usedInFragmentShader.has(t.node.uid)}setEmit(t,e){this._nodeEmitMap.set(t.uid,e)}getEmit(t){return this._nodeEmitMap.get(t.uid)}inputs(){return this._inputShaderTypesByNodeUid.values()}getInput(t){return this._inputShaderTypesByNodeUid.get(t.uid)}*rootOutputNodes(){for(const t of this._outputShaderTypes)yield t}*nodes(){const t=[];for(const e of this._outputShaderTypes.values())t.push(e.node);for(;t.length;){const e=t.pop();"number"!=typeof e&&"boolean"!=typeof e&&t.push(...e.children.filter(Boolean)),yield e}}*nodesOfTypeOrFunction(){for(const t of this.nodes())"number"!=typeof t&&"boolean"!=typeof t&&(yield t)}createSubgraphContext(){const t=this.clone();return t.body="",t.indent=this.indent+2,t._nodeEmitMap=new Map(this._nodeEmitMap),t}clone(){const t=new A([],this._outputShaderTypes,this._transformFeedbackBindings,this._usedInFragmentShader);return t._inputShaderTypesByNodeUid=this._inputShaderTypesByNodeUid,t.indent=this.indent,t.body=this.body,t.varCount=this.varCount,t._nodeEmitMap=this._nodeEmitMap,t}insertVertexShader(t){t.vertex.code.add(""),this._insertInputs(t,"vertex"),t.vertex.code.add(""),t.vertex.code.add("// OUTPUTS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this.rootOutputNodes()){const n="builtin"===e.outVariableType;this.shouldPruneOutputNode(e)||(n?t.vertex.code.add("// ".concat(e.outVariableType.padEnd(7)," ").concat(e.node.type.padEnd(9)," ").concat(e.outVariableName,";")):t.vertex.code.add("".concat(e.outVariableType.padEnd(10)," ").concat(e.node.type.padEnd(9)," ").concat(e.outVariableName,";")))}t.vertex.code.add(""),t.vertex.code.add("void main() {"),t.vertex.code.add("  "+this.body.split("\n").join("\n  "));for(const e of this.rootOutputNodes())this.shouldPruneOutputNode(e)||t.vertex.code.add("  ".concat(e.outVariableName," = ").concat(e.variableName,";"));t.vertex.code.add("}")}insertFragmentShader(t){this._insertInputs(t,"fragment"),t.fragment.code.add(""),t.fragment.code.add("void main() {"),t.fragment.code.add("  "+this.body.split("\n").join("\n  "));for(const e of this.rootOutputNodes())"discard"===e.outVariableType?(t.fragment.code.add("  // TODO: Should ensure codegen for discard appears first in fragment shader"),t.fragment.code.add("  if (".concat(e.variableName,") {")),t.fragment.code.add("    discard;"),t.fragment.code.add("  }"),t.fragment.code.add("  ")):t.fragment.code.add("  ".concat(e.outVariableName," = ").concat(e.variableName,";"));t.fragment.code.add("}")}_insertInputs(t,e){t[e].code.add("// INPUTS: "),t[e].code.add("// --------------------------------------------------------- ");for(const n of this.inputs())n.isUsed&&"builtin"!==n.variableInputType&&("array"===n.node.type?t[e].code.add("".concat(n.variableInputType.padEnd(10)," ").concat(n.node.elementType.type.padEnd(9)," ").concat(n.variableName,"[").concat(n.node.size,"];")):t[e].code.add("".concat(n.variableInputType.padEnd(10)," ").concat(n.node.type.padEnd(9)," ").concat(n.variableName,";")))}}var I=n(99943);function P(t){return new t}function M(t,e,n){var r;const i=null!==(r=t.constructor[e])&&void 0!==r?r:[];t.constructor.hasOwnProperty(e)||Object.defineProperty(t.constructor,e,{value:i.slice()}),t.constructor[e].push(n)}function F(t,e){return(n,r)=>{M(n,"locations",{typeCtor:e,propertyKey:r,parameterIndex:null,index:t})}}const C=t=>(e,n,r)=>{M(e,"inputs",{inputCtor:t,propertyKey:n,parameterIndex:r})},V=t=>(e,n)=>{M(e,"uniforms",{typeCtor:t,propertyKey:n})},k=t=>(e,n)=>{M(e,"options",{typeCtor:t,propertyKey:n})},z=(t,e)=>{M(t,"defines",{propertyKey:e})};const N=(t,e)=>(n,r)=>{n.constructor.builtins.push({builtin:t,propertyKey:r,typeCtor:e})};class D{}D.builtins=[],(0,r._)([N("gl_VertexID",b.Ai)],D.prototype,"glVertexID",void 0);class O{}class E{}E.builtins=[],(0,r._)([N("gl_FragCoord",b.Zb)],E.prototype,"glFragCoord",void 0),(0,r._)([N("gl_PointCoord",b.ZY)],E.prototype,"glPointCoord",void 0);class U{}(0,r._)([(t=>(e,n)=>{M(e,"builtins",{builtin:t,propertyKey:n})})("gl_FragColor")],U.prototype,"glFragColor",void 0);class L{constructor(){this.type="uniform-group"}get _uniforms(){var t;return null!==(t=this.constructor.uniforms)&&void 0!==t?t:[]}}class K{constructor(){this.logShader=!1,this.computeAttributes={}}get vertexInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&0===t.parameterIndex));if(!t)throw new Error("Unable to find vertex input parameter");return t}get computeInput(){return this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&1===t.parameterIndex))}get fragmentInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"fragment"===t.propertyKey));if(!t)throw new Error("Unable to find fragment input parameter");return t}get transformFeedbackBindings(){var t;return null!==(t=this.fragmentInput.inputCtor.transformFeedbackBindings)&&void 0!==t?t:[]}get locations(){var t,e;return[...this.vertexInput.inputCtor.locations,...null!==(t=null===(e=this.computeInput)||void 0===e?void 0:e.inputCtor.locations)&&void 0!==t?t:[]]}get locationsMap(){const t=new Map,e=new Set;for(const n of this.locations)e.has(n.index)?i.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.GraphShaderModule").warnOnce("mapview-rendering","Unable to assigned attribute ".concat(n.propertyKey," to ").concat(n.index,". Index already in use"),{locationsMap:t}):(t.set(n.propertyKey,n.index),e.add(n.index));return t}get locationInfo(){if(!this._locationInfo){const t=this.locationsMap,e=Array.from(t.entries()).map((t=>{let[e,n]=t;return"".concat(e,".").concat(n)})).join("."),n=(0,o.Wm)(e),r=this.computeAttributes;this._locationInfo={hash:n,locations:t,computeAttributeMap:r}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const e of this.locations)t.set("a_"+e.propertyKey,e.index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set;for(const e of this._options)t.add(e.propertyKey);this._optionPropertyKeys=t}return this._optionPropertyKeys}get _shaderModuleClass(){return this.constructor}get _defines(){var t;return null!==(t=this._shaderModuleClass.defines)&&void 0!==t?t:[]}get _options(){var t;return null!==(t=this._shaderModuleClass.options)&&void 0!==t?t:[]}get _uniforms(){var t;return null!==(t=this._shaderModuleClass.uniforms)&&void 0!==t?t:[]}getProgram(t,e,n,r){try{const{vertex:i,fragment:o,uniformBindings:s}=this._generateShaders(t,e,n,r);return new I.K(i,o,this.renamedLocationsMap,this.locationInfo,s,this.transformFeedbackBindings)}catch(T){return new I.K("","",this.renamedLocationsMap,this.locationInfo,[],this.transformFeedbackBindings)}}getDebugUniformClassInfo(t){const e=this._options.find((e=>e.propertyKey===t));if(e)return{type:"option",className:e.typeCtor};const n=this._uniforms.find((e=>e.propertyKey===t));if(!n)throw new Error("Unable to find uniform class type for property: ".concat(t));return{type:"required",className:n.typeCtor}}getShaderKey(t,e,n,r){const i=Object.keys(t).map((e=>"".concat(e,".").concat(t[e]))).join("."),o=Object.keys(n).map((t=>"".concat(t,".").concat(n[t]))).join("."),s=Object.keys(r).map((t=>"".concat(t,".").concat(r[t]))).join("."),a=Object.keys(e).filter((t=>this.optionPropertyKeys.has(t)&&e[t])).join(".");return"".concat(this.constructor.name,".").concat(i,".").concat(o,".").concat(s,".").concat(a)}_generateShaders(t,e,n,r){const i=[];this._setDefines(n),this._setOptionalUniforms(i,e),this._setRequiredUniforms(i);const o=this._hydrateVertexInput(r),s=this._injectPackPrecisionFactor(o,t),a=this._hydrateComputeInput(),c=a&&this._injectComputePackPrecisionFactor(a,t),u=this.vertex(s,c),l=this._hydrateFragmentInput(u),d=this.fragment(l),p=new Set;for(const _ in d){const t=d[_];(0,x.rz)(p,t)}const h=this._getVertexInputBuiltins(),y=A.createVertex({...o,...a},u,h,i,this.transformFeedbackBindings,p);(new w).write(y);const f=this._getFragmentInputBuiltins(d);f.set("glPointCoord","gl_PointCoord");const v=A.createFragment(l,d,f,i,y,this.transformFeedbackBindings);(new w).write(v);const m=this._createShaderBuilder(y,v),g=m.generate("vertex",!1),b=m.generate("fragment",!1);return this.logShader&&(console.log(g),console.log(b)),{vertex:g,fragment:b,uniformBindings:i}}_setDefines(t){for(const e in t)this[e]=t[e]}_setOptionalUniforms(t,e){for(const n of this._options)e[n.propertyKey]?this[n.propertyKey]=this._hydrateUniformGroup(t,n):this[n.propertyKey]=null}_setRequiredUniforms(t){for(const e of this._uniforms)this[e.propertyKey]=this._hydrateUniformGroup(t,e)}_hydrateUniformGroup(t,e){const n=new(0,e.typeCtor);for(const i of null!==(r=n._uniforms)&&void 0!==r?r:[]){var r;const o=P(i.typeCtor),s="u_".concat(e.propertyKey,"_").concat(i.propertyKey),a=o.type,c=[e.propertyKey,i.propertyKey].join(".");if("type"in i.typeCtor&&"array"===i.typeCtor.type){const e=o;t.push({shaderModulePath:c,uniformName:s,uniformType:a,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:o})}else t.push({shaderModulePath:c,uniformName:s,uniformType:a,uniformHydrated:o});n[i.propertyKey]=o}return n}_hydrateVertexInput(t){const e=this.vertexInput.inputCtor,n=e.locations.reduce(((e,n)=>!1===t[n.propertyKey]?e:{...e,[n.propertyKey]:P(n.typeCtor)}),{});for(const{propertyKey:r,typeCtor:i}of e.builtins){const t=P(i);n[r]=t}return n}_hydrateComputeInput(){return null==this.computeInput?null:this.computeInput.inputCtor.locations.reduce(((t,e)=>({...t,[e.propertyKey]:P(e.typeCtor)})),{})}_injectPackPrecisionFactor(t,e){const n={};for(const r in t){const i=t[r],o=e[r];if(o){if("float"!==i.type&&"vec2"!==i.type&&"vec3"!==i.type&&"vec4"!==i.type)throw new Error("InternalError: packPrecisionFactor requires GenType, but found ".concat(i.type));n[r]=i.divide(new b.nt(o))}else n[r]=i}return n}_injectComputePackPrecisionFactor(t,e){const n={},r=new Map;for(const o in this.computeAttributes)for(const t of null!==(i=this.computeAttributes[o])&&void 0!==i?i:[]){var i;r.set(t,o)}for(const o in t){const i=t[o],s=r.get(o);if(!s)continue;const a=e[s];if(a){if("float"!==i.type&&"vec2"!==i.type&&"vec3"!==i.type&&"vec4"!==i.type)throw new Error("InternalError: packPrecisionFactor requires GenType, but found ".concat(i.type));n[o]=i.divide(new b.nt(a))}else n[o]=i}return n}_hydrateFragmentInput(t){const e={};for(const n in t)e[n]=t[n];for(const{propertyKey:n,typeCtor:r}of E.builtins){const t=P(r);e[n]=t}return e}_getVertexInputBuiltins(){const t=this.vertexInput.inputCtor,e=new Map;for(const{builtin:n,propertyKey:r}of t.builtins)e.set(r,n);return e}_getFragmentInputBuiltins(t){const e=t.constructor,n=new Map;for(const i of null!==(r=e.builtins)&&void 0!==r?r:[]){var r;n.set(i.propertyKey,i.builtin)}return n}_createShaderBuilder(t,e){const n=new l;return this._insertDebugInfo(n),t.insertVertexShader(n),e.insertFragmentShader(n),n}_insertDebugInfo(t){t.vertex.code.add("// DEFINES: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._defines)this[e.propertyKey]?t.vertex.code.add("//   ".concat(e.propertyKey,": true")):t.vertex.code.add("//   ".concat(e.propertyKey,": false"));t.vertex.code.add(""),t.vertex.code.add("// OPTIONS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._options)this[e.propertyKey]?t.vertex.code.add("//   ".concat(e.propertyKey,": true")):t.vertex.code.add("//   ".concat(e.propertyKey,": false"))}}},22881:(t,e,n)=>{function r(t,e){const n=[];for(n.push(e);n.length;){const e=n.pop();if("object"==typeof e&&!t.has(e.uid)){t.add(e.uid);for(const t of e.children)n.push(t)}}}n.d(e,{XL:()=>u,aw:()=>d,rR:()=>l,rz:()=>r,vA:()=>o,vL:()=>s,zg:()=>c});class i{constructor(){this.uid=i.NodeCount++,this._debugName=null,this._isMutable=!1,this.isImplicit=!1}get isMutable(){return this._isMutable}setMutable(){return this._isMutable=!0,this}setDebugName(t){return t=function(t){return t.split(" ").map(((t,e)=>e>0?t.charAt(0).toUpperCase()+t.slice(1):t)).join("")}(t),this._debugName=t,this.isImplicit&&this.children[0]instanceof i&&this.children[0].setDebugName(t),this}get debugInfo(){var t;return{name:null!==(t=this._debugName)&&void 0!==t?t:""}}cloneInto(t){t._debugName=this._debugName,t._isMutable=this._isMutable,t.isImplicit=this.isImplicit,t.uid=this.uid}}function o(t){return"object"==typeof t?t.clone():t}i.NodeCount=0;class s extends i{constructor(){super(...arguments),this.shaderType="primitive-node"}}class a extends i{constructor(t){super(),this.child=t,this.shaderType="scope-node"}get children(){return[this.child]}clone(){const t=new a(o(this.child));return this.cloneInto(t),t}}class c extends i{constructor(t,e,n){super(),this.property=t,this.target=e,this.returnType=n,this.shaderType="property-access-node"}get children(){const t=[this.target];return"string"!=typeof this.property&&t.push(this.property),t}clone(){const t=new c(this.property,o(this.target),this.returnType);return this.cloneInto(t),t}}class u extends i{constructor(t,e,n){super(),this.condition=t,this.ifTrue=e,this.ifFalse=n,this.shaderType="condition-node"}get children(){return[this.condition,this.ifTrue,this.ifFalse]}clone(){const t=o(this.ifTrue),e=this.ifFalse?o(this.ifFalse):null,n=new u(this.condition,t,e);return this.cloneInto(n),n}}class l extends i{constructor(t,e,n,r){super(),this.captureList=t,this.returnType=e,this.generator=r,this.shaderType="block-node",n&&(this.subgraph=new a(n))}get children(){var t;return Object.keys(this.captureList).map((t=>this.captureList[t])).concat(null!==(t=this.subgraph)&&void 0!==t?t:[])}clone(){const t={};for(const n in this.captureList)t[n]=o(this.captureList[n]);const e=new l(t,this.returnType,this.subgraph?o(this.subgraph.child):this.subgraph,this.generator);return this.cloneInto(e),e}}class d extends i{constructor(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(),this.token=t,this._children=e,this.isInfix=n,this.isPropertyAccess=r,this.returnType=i,this.isTernary=o,this.shaderType="function-node"}get children(){return this._children}clone(){const t=new d(this.token,this._children.map(o),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);return this.cloneInto(t),t}}},60984:(t,e,n)=>{n.d(e,{$5:()=>yt,$I:()=>B,AU:()=>Dt,Ai:()=>E,Bw:()=>Ft,F8:()=>Ot,Io:()=>At,LC:()=>pt,MM:()=>ft,My:()=>x,Om:()=>It,PM:()=>Ut,RI:()=>Pt,S8:()=>Nt,Sj:()=>lt,T9:()=>Ct,TF:()=>Et,Tk:()=>it,U:()=>R,US:()=>Lt,Uo:()=>gt,Wh:()=>H,Xe:()=>ht,ZY:()=>A,Zb:()=>P,Zc:()=>$,aX:()=>vt,eB:()=>I,eR:()=>W,fV:()=>Y,gn:()=>Tt,j1:()=>ot,jc:()=>Mt,jh:()=>kt,jk:()=>Vt,ln:()=>G,mk:()=>xt,nf:()=>dt,nt:()=>T,or:()=>mt,qE:()=>St,tn:()=>bt,w0:()=>q,x:()=>k,z7:()=>S,ze:()=>nt,zi:()=>zt});var r,i,o,s,a,c,u,l,d,p,h,y,f,v,m=n(35143),g=n(22881);function b(t){return new Proxy(t,{get(e,n){if("constructor"===n)return new Proxy(e.constructor,{construct:(t,e,n)=>b(new t(...e))});if(n in e)return e[n];if("string"==typeof n){const e=function(t){const e=[["float","vec2","vec3","vec4"],["int","ivec2","ivec3","ivec4"],["uint","uvec2","uvec3","uvec4"],["bool","bvec2","bvec3","bvec4"]];for(const n of e)if(n.includes(t))return n.map((t=>j[t]));throw new Error("Unable to find type family")}(t.type);return X(t,n,e[n.length-1])}}})}function _(t){return new Proxy(t,{construct:(t,e,n)=>b(new t(...e))})}class w extends Error{}let x=r=class extends g.vL{constructor(t,e){super(),this.elementType=t,this.size=e,this.children=[],this.type="array"}clone(){const t=new r(this.elementType,this.size);return super.cloneInto(t),t}get(t){if("number"==typeof t){const e=new E(t);return e.isImplicit=!0,X(this,e,this.elementType.constructor)}return X(this,t,this.elementType.constructor)}last(){return this.get(this.size-1)}first(){return this.get(0)}findIndex(t,e,n){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.size;const i=new E(n).setMutable().setDebugName("FindIndexIterator"),o=e(t.get(i)).setDebugName("FindIndexPredicate"),s=rt({iter:i},E,o,(t=>{let{out:e,iter:n,subgraph:i}=t;return"\n".concat(e," = -1;\n\nfor (; ").concat(n," < ").concat(r,"; ").concat(n,"++) {\n\n").concat(i.body,"\n\n  if (").concat(i.varName,") {\n    ").concat(e," = ").concat(n,";\n    break;\n  }\n\n}\n")})).setDebugName("FindIndexBlock");return s}(this,t,e,n)}glslFindIndex(t,e,n){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.size;const i=rt({array:t},E,null,(t=>{let{out:i,array:o}=t;return"\n".concat(i," = -1;\nfor (int i = ").concat(n,"; i < ").concat(r,"; i++) {\n  bool condition;\n  ").concat(e({array:o,i:"i",out:"condition"}),"\n  if (condition) {\n    ").concat(i," = i;\n    break;\n  }\n}\n")})).setDebugName("GlslFindIndexBlock");return i}(this,t,e,n)}static ofType(t,e){const n={construct:(n,i)=>new r(new t,e)};return new Proxy(r,n)}};x.type="array",x=r=(0,m._)([function(t){return new Proxy(t,{construct:(t,e,n)=>function(t){return new Proxy(t,{get(e,n){if(n in e)return e[n];if("string"==typeof n){const e=parseInt(n,10);if(!isNaN(e))return X(t,"[".concat(e,"]"),t.elementType.constructor)}}})}(new t(...e))})}],x);class S extends g.vL{constructor(){super(...arguments),this.type="sampler2D",this.children=[]}clone(){const t=new S;return t.children=this.children.map(g.vA),super.cloneInto(t),t}}S.type="sampler2D";class T extends g.vL{constructor(t){super(),this.type="float",this.children=[t]}clone(){const t=new T((0,g.vA)(this.children[0]));return super.cloneInto(t),t}multiply(t){return st(this,"number"==typeof t?D(t,T):t)}divide(t){return at(this,"number"==typeof t?D(t,T):t)}add(t){return ct(this,"number"==typeof t?D(t,T):t)}subtract(t){return ut(this,"number"==typeof t?D(t,T):t)}}T.type="float";let A=i=class extends g.vL{constructor(t,e){super(),this.type="vec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new i((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]));return super.cloneInto(t),t}get 0(){return X(this,"[0]",T)}get 1(){return X(this,"[1]",T)}get 2(){throw new w}get 3(){throw new w}multiply(t){return st(this,"number"==typeof t?D(t,T):t)}divide(t){return at(this,"number"==typeof t?D(t,T):t)}add(t){return ct(this,"number"==typeof t?D(t,T):t)}subtract(t){return ut(this,"number"==typeof t?D(t,T):t)}};A.type="vec2",A=i=(0,m._)([_],A);let I=o=class extends g.vL{constructor(t,e,n){super(),this.type="vec3",this.children=[t,e,n].filter((t=>null!=t))}get 0(){return X(this,"[0]",T)}get 1(){return X(this,"[1]",T)}get 2(){return X(this,"[2]",T)}get 3(){throw new w}clone(){const t=new o((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]));return super.cloneInto(t),t}multiply(t){return st(this,"number"==typeof t?D(t,T):t)}divide(t){return at(this,"number"==typeof t?D(t,T):t)}add(t){return ct(this,"number"==typeof t?D(t,T):t)}subtract(t){return ut(this,"number"==typeof t?D(t,T):t)}};I.type="vec3",I=o=(0,m._)([_],I);let P=s=class extends g.vL{constructor(t,e,n,r){super(),this.type="vec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new s((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(t),t}get 0(){return X(this,"[0]",T)}get 1(){return X(this,"[1]",T)}get 2(){return X(this,"[2]",T)}get 3(){return X(this,"[3]",T)}multiply(t){return st(this,"number"==typeof t?D(t,T):t)}divide(t){return at(this,"number"==typeof t?D(t,T):t)}add(t){return ct(this,"number"==typeof t?D(t,T):t)}subtract(t){return ut(this,"number"==typeof t?D(t,T):t)}};P.type="vec4",P=s=(0,m._)([_],P);let M=a=class extends g.vL{constructor(t){super(),this.type="uint",this.children=[t]}clone(){const t=new a((0,g.vA)(this.children[0]));return super.cloneInto(t),t}};M.type="uint",M=a=(0,m._)([_],M);let F=c=class extends g.vL{constructor(t,e){super(),this.type="uvec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new c((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]));return super.cloneInto(t),t}};F.type="uvec2",F=c=(0,m._)([_],F);let C=u=class extends g.vL{constructor(t,e,n){super(),this.type="uvec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new u((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]));return super.cloneInto(t),t}};C.type="uvec3",C=u=(0,m._)([_],C);let V=l=class extends g.vL{constructor(t,e,n,r){super(),this.type="uvec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new l((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(t),t}};V.type="uvec4",V=l=(0,m._)([_],V);class k extends g.vL{constructor(t){super(),this.type="bool",this.children=[t]}and(t){return gt(this,t)}or(t){return mt(this,t)}clone(){const t=new k((0,g.vA)(this.children[0]));return super.cloneInto(t),t}}k.type="bool";let z=d=class extends g.vL{constructor(t,e){super(),this.type="bvec2",this.children=[t,e].filter((t=>null!=t))}all(){return _t(this)}any(){return wt(this)}clone(){const t=new d((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]));return super.cloneInto(t),t}};z.type="bvec2",z=d=(0,m._)([_],z);let N=p=class extends g.vL{constructor(t,e,n){super(),this.type="bvec3",this.children=[t,e,n].filter((t=>null!=t))}all(){return _t(this)}any(){return wt(this)}clone(){const t=new p((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]));return super.cloneInto(t),t}};function D(t,e){return"number"==typeof t?new e(t):t}N.type="bvec3",N=p=(0,m._)([_],N);let O=h=class extends g.vL{constructor(t,e,n,r){super(),this.type="bvec4",this.children=[t,e,n,r].filter((t=>null!=t))}all(){return _t(this)}any(){return wt(this)}clone(){const t=new h((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(t),t}};O.type="bvec4",O=h=(0,m._)([_],O);class E extends g.vL{constructor(t){super(),this.type="int",this.children=[t]}multiply(t){return st(this,D(t,E))}add(t){return ct(this,D(t,E))}subtract(t){return ut(this,D(t,E))}divide(t){return at(this,D(t,E))}clone(){const t=new E((0,g.vA)(this.children[0]));return super.cloneInto(t),t}}E.type="int";let U=y=class extends g.vL{constructor(t,e){super(),this.type="ivec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new y((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]));return super.cloneInto(t),t}};U.type="ivec2",U=y=(0,m._)([_],U);let L=f=class extends g.vL{constructor(t,e,n){super(),this.type="ivec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new f((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]));return super.cloneInto(t),t}};L.type="ivec3",L=f=(0,m._)([_],L);let K=v=class extends g.vL{constructor(t,e,n,r){super(),this.type="ivec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new v((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(t),t}};K.type="ivec4",K=v=(0,m._)([_],K);class Z extends g.vL{constructor(t,e,n,r){super(),this.type="mat2",this.children=[t,e,n,r]}clone(){const t=new Z((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]));return super.cloneInto(t),t}}Z.type="mat2";class R extends g.vL{static identity(){return new R(1,0,0,0,1,0,0,0,1)}static fromRotation(t){const e=Ot(t),n=Tt(t);return new R(n,e,0,nt(e),n,0,0,0,1)}constructor(t,e,n,r,i,o,s,a,c){super(),this.type="mat3",this.children=[t,e,n,r,i,o,s,a,c]}add(t){return ct(this,t)}multiply(t){return st(this,t)}clone(){const t=new R((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]),(0,g.vA)(this.children[4]),(0,g.vA)(this.children[5]),(0,g.vA)(this.children[6]),(0,g.vA)(this.children[7]),(0,g.vA)(this.children[8]));return super.cloneInto(t),t}}R.type="mat3";class B extends g.vL{static identity(){return new B(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}constructor(t,e,n,r,i,o,s,a,c,u,l,d,p,h,y,f){super(),this.type="mat4",this.children=[t,e,n,r,i,o,s,a,c,u,l,d,p,h,y,f]}static fromColumns(t,e,n,r){return new B(t.x,t.y,t.z,t.w,e.x,e.y,e.z,e.w,n.x,n.y,n.z,n.w,r.x,r.y,r.z,r.w)}multiply(t){return st(this,t)}clone(){const t=new B((0,g.vA)(this.children[0]),(0,g.vA)(this.children[1]),(0,g.vA)(this.children[2]),(0,g.vA)(this.children[3]),(0,g.vA)(this.children[4]),(0,g.vA)(this.children[5]),(0,g.vA)(this.children[6]),(0,g.vA)(this.children[7]),(0,g.vA)(this.children[8]),(0,g.vA)(this.children[9]),(0,g.vA)(this.children[10]),(0,g.vA)(this.children[11]),(0,g.vA)(this.children[12]),(0,g.vA)(this.children[13]),(0,g.vA)(this.children[14]),(0,g.vA)(this.children[15]));return super.cloneInto(t),t}}B.type="mat4";const j={float:T,vec2:A,vec3:I,vec4:P,int:E,ivec2:U,ivec3:L,ivec4:K,uint:M,uvec2:F,uvec3:C,uvec4:V,bool:k,bvec2:z,bvec3:N,bvec4:O},H=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new E(...e)},Y=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new T(...e)},$=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new A(...e)},W=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new I(...e)},G=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new P(...e)},q=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new R(...e)};function X(t,e,n){const r=new n(new g.zg(e,t,n));return r.isImplicit=!0,r}function J(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r){const i=new r,o=new r(new g.aw(t,[e,n],!0,!1,i));return o.isImplicit=!0,o}if("float"===e.type||"int"===e.type){const r=new n.constructor(new g.aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}if(("mat2"===e.type||"mat3"===e.type||"mat4"===e.type)&&"float"!==n.type){const r=new n.constructor(new g.aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}const i=new e.constructor(new g.aw(t,[e,n],!0,!1,e.constructor));return i.isImplicit=!0,i}function Q(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.constructor;const r=new n(new g.aw(t,[e],!1,!1,n));return r.isImplicit=!0,r}function tt(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.constructor;const i=new r(new g.aw(t,[e,n],!1,!1,r));return i.isImplicit=!0,i}function et(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.constructor;const o=new i(new g.aw(t,[e,n,r],!1,!1,i));return o.isImplicit=!0,o}function nt(t){return st(t,Y(-1))}function rt(t,e,n,r){return new e(new g.rR(t,e,n,r))}function it(t,e,n){const r="function"==typeof e?e():e,i="function"==typeof n?n():n,o=new r.constructor(new g.XL(t,r,i));return o.isImplicit=!0,o}function ot(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map((t=>{let[e,n]=t;return"function"==typeof n?[e,n()]:[e,n]})),i=r[0][1].constructor,o=r.findIndex((t=>!0===t[0]));if(-1===o)throw new Error("A cond must have a fallthrough case with `true`/; ");const s=r.slice(0,o),a=r[o][1],c=new i(s.reduceRight(((t,e)=>it(e[0],e[1],t)),a));return c.isImplicit=!0,c}function st(t,e){return J("*",t,e)}function at(t,e){return J("/",t,e)}function ct(t,e){return J("+",t,e)}function ut(t,e){return J("-",t,e)}function lt(t,e){return J(">>",t,e)}function dt(t,e){return J("&",t,e)}function pt(t,e){return J("==",t,e,k)}function ht(t,e){return J("<",t,e,k)}function yt(t,e){return J("<=",t,e,k)}function ft(t,e){return J(">",t,e,k)}function vt(t,e){return J(">=",t,e,k)}function mt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length<=1?e[0]:e.slice(1).reduce(((t,e)=>function(t,e){return J("||",t,e,k)}(t,e)),e[0])}function gt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length<=1?e[0]:e.slice(1).reduce(((t,e)=>function(t,e){return J("&&",t,e,k)}(t,e)),e[0])}function bt(t){return Q("abs",t)}function _t(t){return Q("all",t,k)}function wt(t){return Q("any",t,k)}function xt(t){return Q("ceil",t)}function St(t,e,n){return et("clamp",t,e,n,t.constructor)}function Tt(t){return Q("cos",t)}function At(t,e){return tt("distance",t,e,T)}function It(t,e){return tt("dot",t,e,T)}function Pt(t){return Q("floor",t)}function Mt(t){return Q("fract",t)}function Ft(t){return Q("length",t,T)}function Ct(t,e){return tt("max",t,e)}function Vt(t,e){return tt("min",t,e)}function kt(t,e,n){return et("mix",t,e,n)}function zt(t,e){return tt("mod",t,e)}function Nt(t){return Q("normalize",t)}function Dt(t){return"bool"===t.type?Q("!",t):Q("not",t)}function Ot(t){return Q("sin",t)}function Et(t,e,n){return et("smoothstep",t,e,n)}function Ut(t,e){return tt("step",t,e,e.constructor)}function Lt(t,e){return tt("texture2D",t,e,P)}},32743:(t,e,n)=>{var r;n.d(e,{N:()=>r}),function(t){t[t.Fill=0]="Fill",t[t.PatternFill=1]="PatternFill",t[t.ComplexFill=2]="ComplexFill",t[t.OutlineFill=3]="OutlineFill",t[t.PatternOutlineFill=4]="PatternOutlineFill",t[t.ComplexOutlineFill=5]="ComplexOutlineFill",t[t.Marker=6]="Marker",t[t.PieChart=7]="PieChart",t[t.Line=8]="Line",t[t.TexturedLine=9]="TexturedLine",t[t.Text=10]="Text",t[t.Label=11]="Label",t[t.Heatmap=12]="Heatmap",t[t.DotDensity=13]="DotDensity",t[t.Test=14]="Test"}(r||(r={}))},43282:(t,e,n)=>{n.d(e,{c:()=>r});const r={bitset:{isSDF:0,isMapAligned:1,scaleSymbolsProportionally:2,overrideOutlineColor:3,colorLocked:4}}},96479:(t,e,n)=>{n.d(e,{f_:()=>v,$Z:()=>y,DM:()=>f,rz:()=>h});var r=n(35143),i=n(90554),o=n(94047),s=n(60984),a=n(81806),c=n(60853);class u extends o.k2{getVisualVariableData(t){if(!this._vvData){const e=this.getAttributeDataCoords(t);this._vvData=(0,s.US)(this.visualVariableData,e).setDebugName("storage2")}return this._vvData}getAttributeDataCoords(t){if(!this._uv){const e=(0,c.Kt)(t),n=this.size,r=(0,s.Wh)(e.x),i=(0,s.Wh)(e.y).multiply((0,s.Wh)(256)),o=(0,s.Wh)(e.z).multiply((0,s.Wh)(256)).multiply((0,s.Wh)(256)),a=(0,s.fV)(r.add(i).add(o)),u=(0,s.zi)(a,n),l=a.subtract(u).divide(n);this._uv=new s.ZY(u,l).add(.5).divide(n)}return this._uv}getFilterData(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.filterFlags,e).setDebugName("storage0")}getAnimationData(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.animation,e).setDebugName("storage1")}getVVData(t){return this.getVisualVariableData(t)}getDataDrivenData0(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.dataDriven0,e).setDebugName("storage30")}getDataDrivenData1(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.dataDriven1,e).setDebugName("storage31")}getDataDrivenData2(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.dataDriven2,e).setDebugName("storage32")}getGPGPUData(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.gpgpu,e).setDebugName("storage4")}getFilterFlags(t){return(0,a.A)("webgl-ignores-sampler-precision")?(0,s.mk)(this.getFilterData(t).x.multiply((0,s.fV)(255))):this.getFilterData(t).x.multiply((0,s.fV)(255))}getAnimationValue(t){return this.getAnimationData(t).x}getSizeValue(t){return this.getVisualVariableData(t).x}getColorValue(t){return this.getVisualVariableData(t).y}getOpacityValue(t){return this.getVisualVariableData(t).z}getRotationValue(t){return this.getVisualVariableData(t).w}}(0,r._)([(0,o.Pi)(s.z7)],u.prototype,"filterFlags",void 0),(0,r._)([(0,o.Pi)(s.z7)],u.prototype,"animation",void 0),(0,r._)([(0,o.Pi)(s.z7)],u.prototype,"gpgpu",void 0),(0,r._)([(0,o.Pi)(s.z7)],u.prototype,"visualVariableData",void 0),(0,r._)([(0,o.Pi)(s.z7)],u.prototype,"dataDriven0",void 0),(0,r._)([(0,o.Pi)(s.z7)],u.prototype,"dataDriven1",void 0),(0,r._)([(0,o.Pi)(s.z7)],u.prototype,"dataDriven2",void 0),(0,r._)([(0,o.Pi)(s.nt)],u.prototype,"size",void 0);class l extends o.k2{}(0,r._)([(0,o.Pi)(s.nt)],l.prototype,"activeReasons",void 0),(0,r._)([(0,o.Pi)(s.nt)],l.prototype,"highlightAll",void 0);class d extends o.k2{}(0,r._)([(0,o.Pi)(s.ZY)],d.prototype,"position",void 0),(0,r._)([(0,o.Pi)(s.nt)],d.prototype,"distance",void 0),(0,r._)([(0,o.Pi)(s.nt)],d.prototype,"smallSymbolDistance",void 0),(0,r._)([(0,o.Pi)(s.nt)],d.prototype,"smallSymbolSizeThreshold",void 0);var p=n(21415);class h extends o.ZA{}(0,r._)([(0,o.C5)(0,s.eB)],h.prototype,"id",void 0),(0,r._)([(0,o.C5)(1,s.nt)],h.prototype,"bitset",void 0),(0,r._)([(0,o.C5)(2,s.ZY)],h.prototype,"pos",void 0);class y extends o.Y7{}(0,r._)([(0,o.C5)(14,s.ZY)],y.prototype,"nextPos1",void 0),(0,r._)([(0,o.C5)(15,s.ZY)],y.prototype,"nextPos2",void 0);class f extends o.HS{}class v extends o.A{clip(t,e){let n=new s.nt(0);const r=this.storage.getFilterFlags(t);if(n=n.add((0,s.fV)(2).multiply((0,s.fV)(1).subtract((0,c.i6)(r,0)))),this.inside?n=n.add((0,s.fV)(2).multiply((0,s.fV)(1).subtract((0,c.i6)(r,1)))):this.outside?n=n.add((0,s.fV)(2).multiply((0,c.i6)(r,1))):this.highlight&&(n=n.add((0,s.fV)(2).multiply((0,s.fV)(1).subtract(this._checkHighlight(r))))),null!=e){const t=new s.nt(1).subtract((0,s.PM)(e.x,this.view.currentZoom)),r=(0,s.PM)(e.y,this.view.currentZoom);n=n.add(new s.nt(2).multiply(t.add(r)))}return n}getFragmentOutput(t,e){var n,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.nt(1/255);const a=new o.mm;return a.glFragColor=null!==(n=null!==(r=this._maybeWriteHittest(e))&&void 0!==r?r:this._maybeHighlight(t,i))&&void 0!==n?n:t,a}_maybeHighlight(t,e){return this.highlight?new s.Zb(t.rgb,(0,s.PM)(e,t.a)):null}_checkHighlight(t){let e=this._checkHighlightBit(t,0);for(let n=1;n<i.M$.length;n++)e=e.add(this._checkHighlightBit(t,n));return(0,s.PM)(new s.nt(.1),e.add(this.highlight.highlightAll))}_checkHighlightBit(t,e){return(0,c.yS)(t,e).multiply((0,c.mh)(this.highlight.activeReasons,e))}maybeRunHittest(t,e,n){if(null==this.hittestRequest)return null;const r=this.hittest(t,e,n);let i=(0,s.Tk)((0,s.MM)(r,this.hittestRequest.distance),new s.nt(2),new s.nt(0));const o=this.storage.getAttributeDataCoords(t.id),a=(0,c.nb)(o);i=i.add(this.clip(t.id,t.zoomRange));const u=new s.Zb(new s.nt(1/255),0,0,0);return{glPointSize:new s.nt(1),glPosition:new s.Zb(a,i,1),color:u}}_maybeWriteHittest(t){return null!=this.hittestRequest?t.color:null}}(0,r._)([o.E8],v.prototype,"inside",void 0),(0,r._)([o.E8],v.prototype,"outside",void 0),(0,r._)([(0,o.uK)(l)],v.prototype,"highlight",void 0),(0,r._)([(0,o.Pi)(u)],v.prototype,"storage",void 0),(0,r._)([(0,o.Pi)(p.o)],v.prototype,"view",void 0),(0,r._)([(0,o.uK)(d)],v.prototype,"hittestRequest",void 0)},49760:(t,e,n)=>{n.d(e,{Bh:()=>f,KP:()=>y,Ps:()=>v});var r=n(35143),i=n(94047),o=n(60984),s=n(96479),a=n(90113),c=n(2702),u=n(24896),l=n(30358),d=n(60853);class p extends c._{}(0,r._)([(0,i.C5)(5,o.Zb)],p.prototype,"tlbr",void 0),(0,r._)([(0,i.C5)(6,o.nt)],p.prototype,"width",void 0),(0,r._)([(0,i.C5)(7,o.nt)],p.prototype,"height",void 0),(0,r._)([(0,i.C5)(8,o.ZY)],p.prototype,"offset",void 0),(0,r._)([(0,i.C5)(9,o.ZY)],p.prototype,"scale",void 0),(0,r._)([(0,i.C5)(10,o.nt)],p.prototype,"angle",void 0);class h extends s.DM{}function y(t,e){const n=t.view.requiredZoomFactor,r=new o.ZY(e.width,e.height),i=r.multiply(e.scale).multiply(n),s=e.angle.multiply(a.rp),c=(0,o.F8)(s),u=(0,o.gn)(s),l=function(t,e,n,r,i){const s=(0,o.LC)((0,d.mh)(i,a.Fz),(0,o.fV)(1)),c=(0,d.Rj)(new o.Zb(t,0));return(0,o.Tk)(s,(0,o.w0)(r.divide(e.x),n.divide(e.y),0,(0,o.ze)(n.divide(e.x)),r.divide(e.y),0,(0,d._9)((0,o.Zc)(c,0)),(0,d._9)((0,o.Zc)(0,c)),1),(0,o.w0)(r.divide(e.x),n.divide(e.y),0,(0,o.ze)(n.divide(e.x)),r.divide(e.y),0,0,0,1))}(e.id,i,c,u,e.bitset),p=t.localTileOffset.getPatternOffsetAtTileOrigin(r,c,u),h=n.multiply(e.scale).multiply(e.offset.subtract(p)).divide(i),y=new o.eB(e.pos,1),f=l.multiply(y).xy.subtract(h),v=e.tlbr.divide(t.mosaicInfo.size.xyxy);let m=(0,d.mh)(e.bitset,a.cn);return null!=t.visualVariableColor&&(m=(0,o.Tk)((0,d.M8)(t.storage.getColorValue(e.id)),new o.nt(0),m)),{tileTextureCoord:f,tlbr:v,sampleAlphaOnly:m}}function f(t,e){const n=(0,o.zi)(e.tileTextureCoord,new o.nt(1)),r=(0,o.jh)(e.tlbr.xy,e.tlbr.zw,n);let i=(0,o.US)(t.mosaicInfo.texture,r);return i=(0,o.Tk)((0,o.MM)(e.sampleAlphaOnly,new o.nt(.5)),i.aaaa,i),e.color.multiply(i)}class v extends c.z{vertex(t,e){return{...super.vertex(t,e),...y(this,t)}}fragment(t){const e=f(this,t);return this.getFragmentOutput(e,t,new o.nt(0))}}(0,r._)([(0,i.Pi)(l.b)],v.prototype,"mosaicInfo",void 0),(0,r._)([(0,i.Pi)(u.P)],v.prototype,"localTileOffset",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(p)),(0,r.a)(1,(0,i.hF)(s.$Z))],v.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(h))],v.prototype,"fragment",null)},19836:(t,e,n)=>{n.d(e,{RH:()=>b,cZ:()=>y,v9:()=>v});var r=n(35143),i=n(94047),o=n(60984),s=n(96479),a=n(49760),c=n(46176),u=n(34865),l=n(24896),d=n(30358),p=n(84870),h=n(61858);const y=16,f=1/y,v=128;class m extends s.rz{}(0,r._)([(0,i.C5)(3,o.Zb)],m.prototype,"color",void 0),(0,r._)([(0,i.C5)(4,o.Zb)],m.prototype,"tlbr",void 0),(0,r._)([(0,i.C5)(5,o.nt)],m.prototype,"angle",void 0),(0,r._)([(0,i.C5)(6,o.nt)],m.prototype,"aux1",void 0),(0,r._)([(0,i.C5)(7,o.nt)],m.prototype,"aux2",void 0),(0,r._)([(0,i.C5)(8,o.ZY)],m.prototype,"aux3",void 0),(0,r._)([(0,i.C5)(9,o.ZY)],m.prototype,"aux4",void 0),(0,r._)([(0,i.C5)(10,o.ZY)],m.prototype,"zoomRange",void 0);class g extends h.A1{}class b extends p.My{vertex(t,e){const{aux1:n,aux2:r,aux3:i,aux4:s}=t,c={...t,width:n,height:r,offset:i,scale:s.multiply(f)},u={...t,halfWidth:n,referenceHalfWidth:r,offset:i,normal:s.subtract(v).multiply(f)},l=(0,p.Yb)(this,u),d=(0,a.KP)(this,c),h=(0,o.MM)(l.isOutline,new o.nt(.5));return{...l,...d,...this.maybeRunHittest(t,e,h)}}fragment(t){const{isOutline:e}=t,n=(0,o.MM)(e,new o.nt(.5)),r=(0,u.o7)(t,this.antialiasingControls.blur),i=(0,a.Bh)(this,t),s=(0,o.Tk)(n,r,i),c=(0,o.Tk)(n,new o.nt(1/255),new o.nt(0));return this.getFragmentOutput(s,t,c)}hittest(t,e,n){return(0,o.Tk)(n,(0,c.My)(this.hittestRequest),(0,c.Lq)(this,t,e))}}(0,r._)([(0,i.Pi)(d.b)],b.prototype,"mosaicInfo",void 0),(0,r._)([(0,i.Pi)(l.P)],b.prototype,"localTileOffset",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(m)),(0,r.a)(1,(0,i.hF)(s.$Z))],b.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(g))],b.prototype,"fragment",null)},2702:(t,e,n)=>{n.d(e,{_:()=>d,z:()=>p});var r=n(35143),i=n(94047),o=n(60984),s=n(96479),a=n(46176),c=n(20199),u=n(27545),l=n(20429);class d extends s.rz{}(0,r._)([(0,i.C5)(3,o.Zb)],d.prototype,"color",void 0),(0,r._)([(0,i.C5)(4,o.ZY)],d.prototype,"zoomRange",void 0);class p extends s.f_{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const n=(0,l.cF)(this,t.id),r=(0,l.G7)(this,t.id,t.color).multiply(n),i=this.view.displayViewScreenMat3.multiply(new o.eB(t.pos.xy,1)),s=this.clip(t.id,t.zoomRange);return{glPosition:new o.Zb(i.xy,s,1),color:r,...this.maybeRunHittest(t,e,null)}}fragment(t){return this.getFragmentOutput(t.color,t,new o.nt(0))}hittest(t,e){return(0,a.Lq)(this,t,e)}}(0,r._)([(0,i.uK)(c._)],p.prototype,"visualVariableColor",void 0),(0,r._)([(0,i.uK)(u.i)],p.prototype,"visualVariableOpacity",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(d)),(0,r.a)(1,(0,i.hF)(s.$Z))],p.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(s.DM))],p.prototype,"fragment",null)},34865:(t,e,n)=>{n.d(e,{$0:()=>w,Xc:()=>v,cM:()=>S,fF:()=>m,fg:()=>g,o7:()=>x,xw:()=>_});var r=n(35143),i=n(94047),o=n(60984),s=n(96479),a=n(90113),c=n(46176),u=n(20199),l=n(27545),d=n(77380),p=n(39852),h=n(45718),y=n(75256),f=n(20429);class v extends s.rz{}(0,r._)([(0,i.C5)(3,o.Zb)],v.prototype,"color",void 0),(0,r._)([(0,i.C5)(4,o.ZY)],v.prototype,"offset",void 0),(0,r._)([(0,i.C5)(5,o.ZY)],v.prototype,"normal",void 0),(0,r._)([(0,i.C5)(6,o.nt)],v.prototype,"halfWidth",void 0),(0,r._)([(0,i.C5)(7,o.nt)],v.prototype,"referenceHalfWidth",void 0),(0,r._)([(0,i.C5)(8,o.ZY)],v.prototype,"zoomRange",void 0);class m extends s.DM{}class g extends i.k2{}function b(t){return(0,o.T9)(new o.nt(a.Fb).multiply((0,o.PM)(t,new o.nt(a.J5))),new o.nt(1))}function _(t,e){const{halfWidth:n,normal:r}=t,i=b(n),s=(0,o.Bw)(r).multiply(n);return(0,o.qE)(i.multiply(n.subtract(s)).divide(e.add(i).subtract(new o.nt(1))),new o.nt(0),new o.nt(1))}function w(t,e){const{id:n,offset:r,pos:i,normal:s,zoomRange:c}=e,{displayViewScreenMat3:u,displayViewMat3:l}=t.view,d=(0,f.G7)(t,n,e.color),p=(0,f.cF)(t,n),h=function(t,e){const{id:n,halfWidth:r,referenceHalfWidth:i}=e;if((0,f.G5)(t)){const e=new o.nt(2).multiply(i),s=(0,f.Mg)(t,n,e);return new o.nt(.5).multiply(r.divide((0,o.T9)(i,new o.nt(a.Ni)))).multiply(s)}return r}(t,e),y=new o.nt(.5).multiply(t.antialiasingControls.antialiasing),v=(0,o.T9)(h.add(y),new o.nt(.45)).add(new o.nt(.1).multiply(y)),m=b(v).multiply(v).multiply(r),g=l.multiply(new o.eB(m,new o.nt(0))),_=u.multiply(new o.eB(i,new o.nt(1))).add(g),w=new o.nt(2).multiply((0,o.PM)(h,new o.nt(0))).add(t.clip(n,c)),x=new o.Zb(_.xy,w,1);return{color:d,opacity:p,halfWidth:v,normal:s,scaledOffset:m,scaledHalfWidth:h,glPosition:new o.Zb(x.xy,w,1)}}function x(t,e){const{opacity:n,color:r}=t,i=_(t,e);return n.multiply(r).multiply(i)}(0,r._)([(0,i.Pi)(o.nt)],g.prototype,"antialiasing",void 0),(0,r._)([(0,i.Pi)(o.nt)],g.prototype,"blur",void 0);class S extends s.f_{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const n=w(this,t);return{...n,...this.maybeRunHittest(t,e,n.halfWidth)}}fragment(t){const e=x(t,this.antialiasingControls.blur);return this.getFragmentOutput(e,t)}hittest(t,e,n){const{viewMat3:r,tileMat3:i}=this.view,s=r.multiply(i),a=s.multiply(new o.eB(t.pos,1)),u=s.multiply(new o.eB(e.nextPos1,1)),l=s.multiply(new o.eB(e.nextPos2,1)),{distance:d,smallSymbolDistance:p,smallSymbolSizeThreshold:h}=this.hittestRequest,y=(0,o.PM)(n,h.multiply(.5)).multiply(d.subtract(p)),f=this.hittestRequest.position;return(0,o.jk)((0,c.E2)(f,a.xy,u.xy),(0,c.E2)(f,a.xy,l.xy)).subtract(n).add(y)}}(0,r._)([(0,i.Pi)(g)],S.prototype,"antialiasingControls",void 0),(0,r._)([(0,i.uK)(u._)],S.prototype,"visualVariableColor",void 0),(0,r._)([(0,i.uK)(l.i)],S.prototype,"visualVariableOpacity",void 0),(0,r._)([(0,i.uK)(d.n)],S.prototype,"visualVariableSizeMinMaxValue",void 0),(0,r._)([(0,i.uK)(p.F)],S.prototype,"visualVariableSizeScaleStops",void 0),(0,r._)([(0,i.uK)(h.N)],S.prototype,"visualVariableSizeStops",void 0),(0,r._)([(0,i.uK)(y.d)],S.prototype,"visualVariableSizeUnitValue",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(v)),(0,r.a)(1,(0,i.hF)(s.$Z))],S.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(m))],S.prototype,"fragment",null)},24896:(t,e,n)=>{n.d(e,{P:()=>a});var r=n(35143),i=n(94047),o=n(60984),s=n(90113);class a extends i.k2{getPatternOffsetAtTileOrigin(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.nt(0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.nt(1);const r=new o.ZY(s.YV).divide(t);let i=t.multiply((0,o.jc)(this.maxIntsToLocalOrigin.multiply(r))).add(this.tileOffsetFromLocalOrigin).subtract(new o.nt(.5).multiply(t));return i=new o.ZY(i.x.multiply(n).subtract(i.y.multiply(e)),i.x.multiply(e).add(i.y.multiply(n))),(0,o.zi)(i,t)}}(0,r._)([(0,i.Pi)(o.ZY)],a.prototype,"tileOffsetFromLocalOrigin",void 0),(0,r._)([(0,i.Pi)(o.ZY)],a.prototype,"maxIntsToLocalOrigin",void 0)},30358:(t,e,n)=>{n.d(e,{b:()=>s});var r=n(35143),i=n(94047),o=n(60984);class s extends i.k2{}(0,r._)([(0,i.Pi)(o.ZY)],s.prototype,"size",void 0),(0,r._)([(0,i.Pi)(o.z7)],s.prototype,"texture",void 0)},84870:(t,e,n)=>{n.d(e,{A7:()=>b,My:()=>w,Yb:()=>_,nj:()=>x,wG:()=>g});var r=n(35143),i=n(94047),o=n(60984),s=n(96479),a=n(90113),c=n(46176),u=n(34865),l=n(60853),d=n(20199),p=n(27545),h=n(77380),y=n(39852),f=n(45718),v=n(75256),m=n(20429);class g extends s.rz{}(0,r._)([(0,i.C5)(3,o.ZY)],g.prototype,"offset",void 0),(0,r._)([(0,i.C5)(4,o.Zb)],g.prototype,"color",void 0),(0,r._)([(0,i.C5)(5,o.ZY)],g.prototype,"normal",void 0),(0,r._)([(0,i.C5)(6,o.nt)],g.prototype,"halfWidth",void 0),(0,r._)([(0,i.C5)(7,o.nt)],g.prototype,"referenceHalfWidth",void 0),(0,r._)([(0,i.C5)(8,o.ZY)],g.prototype,"zoomRange",void 0);class b extends u.fF{}function _(t,e,n){const{id:r,bitset:i}=e,s=(0,l.mh)(i,a.Xx),c=(0,o.MM)(s,new o.nt(.5)),d=(0,u.$0)(t,e),p=(0,o.Tk)(c,d.halfWidth,new o.nt(0)),h=(0,m.cF)(t,r),y=(0,m.G7)(t,r,e.color),f=(0,o.Tk)(c,e.color,y.multiply(h)),v=t.view.displayViewScreenMat3.multiply(new o.eB(e.pos.xy,1)),g=t.clip(e.id),b=new o.Zb(v.xy,g,1),_=(0,o.Tk)(c,d.glPosition,b),w=n&&t.maybeRunHittest(e,n,c);return{isOutline:s,color:f,opacity:new o.nt(1),halfWidth:p,normal:d.normal,glPosition:_,...w}}class w extends s.f_{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}}(0,r._)([(0,i.Pi)(u.fg)],w.prototype,"antialiasingControls",void 0),(0,r._)([(0,i.uK)(d._)],w.prototype,"visualVariableColor",void 0),(0,r._)([(0,i.uK)(p.i)],w.prototype,"visualVariableOpacity",void 0),(0,r._)([(0,i.uK)(h.n)],w.prototype,"visualVariableSizeMinMaxValue",void 0),(0,r._)([(0,i.uK)(y.F)],w.prototype,"visualVariableSizeScaleStops",void 0),(0,r._)([(0,i.uK)(f.N)],w.prototype,"visualVariableSizeStops",void 0),(0,r._)([(0,i.uK)(v.d)],w.prototype,"visualVariableSizeUnitValue",void 0);class x extends w{vertex(t,e){return _(this,t,e)}fragment(t){const{color:e,isOutline:n}=t,r=(0,o.MM)(n,new o.nt(.5)),i=(0,u.o7)(t,this.antialiasingControls.blur),s=(0,o.Tk)(r,i,e),a=(0,o.Tk)(r,new o.nt(1/255),new o.nt(0));return this.getFragmentOutput(s,t,a)}hittest(t,e,n){return(0,o.Tk)(n,(0,c.My)(this.hittestRequest),(0,c.Lq)(this,t,e))}}(0,r._)([(0,r.a)(0,(0,i.hF)(g)),(0,r.a)(1,(0,i.hF)(s.$Z))],x.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(b))],x.prototype,"fragment",null)},55106:(t,e,n)=>{n.d(e,{_u:()=>p,dW:()=>h,vx:()=>y});var r=n(35143),i=n(94047),o=n(60984),s=n(96479),a=n(2702),c=n(24896),u=n(30358);class l extends a._{}(0,r._)([(0,i.C5)(5,o.Zb)],l.prototype,"tlbr",void 0),(0,r._)([(0,i.C5)(6,o.nt)],l.prototype,"inverseRasterizationScale",void 0);class d extends s.DM{}function p(t,e){const n=e.tlbr.xy,r=e.tlbr.zw,i=r.x.subtract(n.x),s=n.y.subtract(r.y),a=new o.ZY(i,s).multiply(e.inverseRasterizationScale),c=a.multiply(t.view.requiredZoomFactor),u=function(t){const e=new o.nt(1),n=new o.nt(0);return new o.U(e.divide(t.x),n.divide(t.y),0,(0,o.ze)(n.divide(t.x)),e.divide(t.y),0,0,0,1)}(c),l=t.localTileOffset.getPatternOffsetAtTileOrigin(a).divide(c),d=new o.eB(e.pos,1);return{tileTextureCoord:u.multiply(d).xy.subtract(l),tlbr:e.tlbr.divide(t.mosaicInfo.size.xyxy)}}function h(t,e){const n=(0,o.zi)(t.tileTextureCoord,new o.nt(1)),r=(0,o.jh)(t.tlbr.xy,t.tlbr.zw,n),i=(0,o.US)(e.texture,r);return t.color.multiply(i)}class y extends a.z{vertex(t,e){return{...super.vertex(t,e),...p(this,t)}}fragment(t){const e=h(t,this.mosaicInfo);return this.getFragmentOutput(e,t,new o.nt(0))}}(0,r._)([(0,i.Pi)(u.b)],y.prototype,"mosaicInfo",void 0),(0,r._)([(0,i.Pi)(c.P)],y.prototype,"localTileOffset",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(l)),(0,r.a)(1,(0,i.hF)(s.$Z))],y.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(d))],y.prototype,"fragment",null)},61858:(t,e,n)=>{n.d(e,{A1:()=>h,tA:()=>y});var r=n(35143),i=n(94047),o=n(60984),s=n(96479),a=n(34865),c=n(24896),u=n(30358),l=n(84870),d=n(55106);class p extends l.wG{}(0,r._)([(0,i.C5)(9,o.Zb)],p.prototype,"tlbr",void 0),(0,r._)([(0,i.C5)(10,o.nt)],p.prototype,"inverseRasterizationScale",void 0);class h extends l.A7{}class y extends l.nj{vertex(t,e){return{...(0,l.Yb)(this,t,e),...(0,d._u)(this,t)}}fragment(t){const{isOutline:e}=t,n=(0,o.MM)(e,new o.nt(.5)),r=(0,a.o7)(t,this.antialiasingControls.blur),i=(0,d.dW)(t,this.mosaicInfo),s=(0,o.Tk)(n,r,i),c=(0,o.Tk)(n,new o.nt(1/255),new o.nt(0));return this.getFragmentOutput(s,t,c)}}(0,r._)([(0,i.Pi)(u.b)],y.prototype,"mosaicInfo",void 0),(0,r._)([(0,i.Pi)(c.P)],y.prototype,"localTileOffset",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(p)),(0,r.a)(1,(0,i.hF)(s.$Z))],y.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(h))],y.prototype,"fragment",null)},21415:(t,e,n)=>{n.d(e,{o:()=>s});var r=n(35143),i=n(94047),o=n(60984);class s extends i.k2{}(0,r._)([(0,i.Pi)(o.U)],s.prototype,"displayViewScreenMat3",void 0),(0,r._)([(0,i.Pi)(o.U)],s.prototype,"displayViewMat3",void 0),(0,r._)([(0,i.Pi)(o.U)],s.prototype,"displayMat3",void 0),(0,r._)([(0,i.Pi)(o.U)],s.prototype,"viewMat3",void 0),(0,r._)([(0,i.Pi)(o.U)],s.prototype,"tileMat3",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"displayZoomFactor",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"requiredZoomFactor",void 0),(0,r._)([(0,i.Pi)(o.ZY)],s.prototype,"tileOffset",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"currentScale",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"currentZoom",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"metersPerSRUnit",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"rotation",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"pixelRatio",void 0)},20199:(t,e,n)=>{n.d(e,{_:()=>a});var r=n(35143),i=n(94047),o=n(60984),s=n(60853);class a extends i.k2{getColor(t,e,n){return(0,o.j1)([(0,o.or)((0,s.M8)(t),n),e],[(0,o.$5)(t,this.values.first()),this.colors.first()],[(0,o.aX)(t,this.values.last()),this.colors.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,o.MM)(e,t))),n=this.values.get(e),r=e.subtract(1),i=this.values.get(r),s=t.subtract(i).divide(n.subtract(i));return(0,o.jh)(this.colors.get(r),this.colors.get(e),s)}])}}(0,r._)([(0,i.Pi)(o.My.ofType(o.Zb,8))],a.prototype,"colors",void 0),(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],a.prototype,"values",void 0)},27545:(t,e,n)=>{n.d(e,{i:()=>a});var r=n(35143),i=n(94047),o=n(60984),s=n(60853);class a extends i.k2{getOpacity(t){return(0,o.j1)([(0,s.M8)(t),new o.nt(1)],[(0,o.$5)(t,this.opacityValues.first()),this.opacities.first()],[(0,o.aX)(t,this.opacityValues.last()),this.opacities.last()],[!0,()=>{const e=this.opacityValues.findIndex((e=>(0,o.MM)(e,t))),n=this.opacityValues.get(e),r=e.subtract(1),i=this.opacityValues.get(r),s=t.subtract(i).divide(n.subtract(i));return(0,o.jh)(this.opacities.get(r),this.opacities.get(e),s)}])}}(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],a.prototype,"opacities",void 0),(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],a.prototype,"opacityValues",void 0)},77380:(t,e,n)=>{n.d(e,{n:()=>a});var r=n(35143),i=n(94047),o=n(60984),s=n(60853);class a extends i.k2{getSize(t,e){const n=this.minMaxValueAndSize.xy,r=this.minMaxValueAndSize.zw;return(0,o.Tk)((0,s.M8)(t),e,(()=>{const e=t.subtract(n.x).divide(n.y.subtract(n.x)),i=(0,o.qE)(e,new o.nt(0),new o.nt(1));return r.x.add(i.multiply(r.y.subtract(r.x)))}))}}(0,r._)([(0,i.Pi)(o.Zb)],a.prototype,"minMaxValueAndSize",void 0)},39852:(t,e,n)=>{n.d(e,{F:()=>s});var r=n(35143),i=n(94047),o=n(60984);class s extends i.k2{getSizeForViewScale(t){return(0,o.j1)([(0,o.$5)(t,this.values.first()),this.sizes.first()],[(0,o.aX)(t,this.values.last()),this.sizes.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,o.MM)(e,t))),n=this.values.get(e),r=e.subtract(1),i=this.values.get(r),s=t.subtract(i).divide(n.subtract(i));return(0,o.jh)(this.sizes.get(r),this.sizes.get(e),s)}])}}(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],s.prototype,"sizes",void 0),(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],s.prototype,"values",void 0)},45718:(t,e,n)=>{n.d(e,{N:()=>a});var r=n(35143),i=n(94047),o=n(60984),s=n(60853);class a extends i.k2{getSize(t,e){const n=(0,o.j1)([(0,s.M8)(t),e],[(0,o.$5)(t,this.values.first()),this.sizes.first()],[(0,o.aX)(t,this.values.last()),this.sizes.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,o.MM)(e,t))),n=this.values.get(e),r=e.subtract(1),i=this.values.get(r),s=t.subtract(i).divide(n.subtract(i));return(0,o.jh)(this.sizes.get(r),this.sizes.get(e),s)}]);return(0,o.Tk)((0,s.M8)(n),e,n)}}(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],a.prototype,"sizes",void 0),(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],a.prototype,"values",void 0)},75256:(t,e,n)=>{n.d(e,{d:()=>a});var r=n(35143),i=n(94047),o=n(60984),s=n(60853);class a extends i.k2{getSize(t,e){return(0,o.Tk)((0,s.M8)(t),e,t.multiply(this.unitValueToPixelsRatio))}}(0,r._)([(0,i.Pi)(o.nt)],a.prototype,"unitValueToPixelsRatio",void 0)},90113:(t,e,n)=>{var r;n.d(e,{$w:()=>l,Fb:()=>a,Fz:()=>v,H_:()=>r,J5:()=>c,M:()=>p,Ni:()=>d,V5:()=>s,Xx:()=>f,YV:()=>w,au:()=>u,b5:()=>g,bg:()=>b,cn:()=>y,kx:()=>m,os:()=>i,qM:()=>h,rp:()=>o,ti:()=>_}),function(t){t[t.Geographic=0]="Geographic",t[t.Arithmatic=1]="Arithmatic"}(r||(r={}));const i=3.14159265359/180,o=3.14159265359/128,s=1,a=1.1,c=1,u=24,l=8,d=1e-5,p=.05,h=1e-30,y=4,f=0,v=2,m=2,g=3,b=0,_=3,w=16777216},46176:(t,e,n)=>{n.d(e,{Bo:()=>l,Bs:()=>c,E2:()=>s,Lq:()=>p,My:()=>d,g$:()=>h,kW:()=>a});var r=n(60984),i=n(90113),o=n(60853);function s(t,e,n){const i=n.subtract(e),o=function(t,e){return(0,r.Om)(t,(0,r.S8)(e))}(t.subtract(e),i),s=(0,r.qE)(o.divide((0,r.Bw)(i)),new r.nt(0),new r.nt(1));return(0,r.Io)(t,e.add(s.multiply(n.subtract(e))))}function a(t){const e=(0,r.tn)(t);return(0,r.PM)(e.x.add(e.y).add(e.z),new r.nt(1.05))}function c(t,e,n,i){const o=new r.U(n.x.multiply(i.y).subtract(i.x.multiply(n.y)),i.x.multiply(e.y).subtract(e.x.multiply(i.y)),e.x.multiply(n.y).subtract(n.x.multiply(e.y)),n.y.subtract(i.y),i.y.subtract(e.y),e.y.subtract(n.y),i.x.subtract(n.x),e.x.subtract(i.x),n.x.subtract(e.x)),s=e.x.multiply(n.y.subtract(i.y)),a=n.x.multiply(i.y.subtract(e.y)),c=i.x.multiply(e.y.subtract(n.y)),u=s.add(a).add(c);return new r.nt(1).divide(u).multiply(o.multiply(new r.eB(1,t)))}function u(t,e,n,i){return(0,r.LC)(a(c(t,e,n,i)),new r.nt(1))}function l(t,e,n,a){const c=n.subtract(e),l=a.subtract(e),d=(0,o.tL)(c,l),p=(0,r.Uo)((0,r.Xe)(d,new r.nt(i.M)),(0,r.MM)(d,new r.nt(-i.M)));return(0,r.j1)([(0,r.Uo)((0,r.AU)(p),u(t.xy,e,n,a)),new r.nt(-1)],[!0,()=>{const i=s(t,e,n),o=s(t,n,a),c=s(t,a,e);return(0,r.jk)((0,r.jk)(i,o),c)}])}function d(t){return t.distance.add(1)}function p(t,e,n){const{viewMat3:i,tileMat3:o}=t.view,s=i.multiply(o),a=s.multiply(new r.eB(e.pos,1)),c=s.multiply(new r.eB(n.nextPos1,1)),u=s.multiply(new r.eB(n.nextPos2,1));return l(t.hittestRequest.position,a.xy,c.xy,u.xy)}function h(t,e,n){return(0,r.Io)(t,n).subtract(e)}},60853:(t,e,n)=>{n.d(e,{K5:()=>d,Kt:()=>y,M8:()=>a,Rj:()=>f,_9:()=>s,i6:()=>p,mh:()=>l,nb:()=>u,tL:()=>c,xf:()=>v,yS:()=>h});var r=n(90554),i=n(60984),o=n(90113);function s(t){const e=(0,i.fV)(12.9898),n=(0,i.fV)(78.233),r=(0,i.fV)(43758.5453),o=(0,i.Om)(t,(0,i.Zc)(e,n)),s=(0,i.zi)(o,(0,i.fV)(3.14));return(0,i.jc)((0,i.F8)(s).multiply(r))}function a(t){return(0,i.LC)(t,(0,i.fV)(o.qM))}function c(t,e){return t.x.multiply(e.y).subtract(e.x.multiply(t.y))}function u(t){return t.multiply(2).subtract(1)}function l(t,e){const n=(0,i.fV)(2**e);return(0,i.zi)((0,i.RI)(t.divide(n)),(0,i.fV)(2))}function d(t,e){return(0,i.MM)(l(t,e),(0,i.fV)(.5))}function p(t,e){return l(t,e+r.M$.length)}function h(t,e){return l(t,e)}function y(t){const e=l(t.z,7),n=(0,i.fV)(1).subtract(e),r=t.xyz.subtract((0,i.eR)(0,0,(0,i.fV)(128)));return n.multiply(t).add(e.multiply(r))}function f(t){const e=(0,i.ln)(255/256,255/65536,255/16777216,255/4294967296);return(0,i.Om)(t,e)}function v(t){return(0,i.T9)((0,i.T9)((0,i.T9)(t.x,t.y),t.z),t.w)}},20429:(t,e,n)=>{n.d(e,{G5:()=>i,G7:()=>s,Mg:()=>o,TL:()=>c,cF:()=>a});var r=n(60984);function i(t){return null!=t.visualVariableSizeMinMaxValue||null!=t.visualVariableSizeScaleStops||null!=t.visualVariableSizeStops||null!=t.visualVariableSizeUnitValue}function o(t,e,n){if(i(t)){var r,o,s,a,c,u,l;const i=t.storage.getSizeValue(e);return null!==(r=null!==(o=null!==(s=null===(a=t.visualVariableSizeMinMaxValue)||void 0===a?void 0:a.getSize(i,n))&&void 0!==s?s:null===(c=t.visualVariableSizeScaleStops)||void 0===c?void 0:c.getSizeForViewScale(t.view.currentScale))&&void 0!==o?o:null===(u=t.visualVariableSizeStops)||void 0===u?void 0:u.getSize(i,n))&&void 0!==r?r:null===(l=t.visualVariableSizeUnitValue)||void 0===l?void 0:l.getSize(i,n)}return n}function s(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r.x(!1);if(null==t.visualVariableColor)return n;const o=t.storage.getColorValue(e);return t.visualVariableColor.getColor(o,n,i)}function a(t,e){if(null==t.visualVariableOpacity)return new r.nt(1);const n=t.storage.getOpacityValue(e);return t.visualVariableOpacity.getOpacity(n)}function c(t,e){if(null==t.visualVariableRotation)return r.U.identity();const n=t.storage.getRotationValue(e);return t.visualVariableRotation.getVVRotationMat3(n)}},99943:(t,e,n)=>{n.d(e,{K:()=>u});var r=n(50076),i=n(76460),o=n(48611),s=(n(47249),n(81806),n(61678),n(93345),n(12331),n(44488)),a=(n(89179),n(98433),n(86340));function c(t,e,n){const o=e.length;if(o!==n){const s=new r.A("Invalid Uniform","Invalid length, expected ".concat(n," but got ").concat(o),{uniformName:t,values:e});i.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram").errorOnce(s)}}class u{constructor(t,e,n,r,i,o){this._program=null,this._vao=null,this._temporaryTextures=[],this.vertexShader=t,this.fragmentShader=e,this._locations=n,this._locationInfo=r,this._uniformBindings=i,this._transformFeedbackBindings=o}destroy(){this._program&&this._program.dispose(),this.cleanupTemporaryTextures()}get locations(){return this._locations}get locationInfo(){return this._locationInfo}setUniforms(t){this._uniforms=t}cleanupTemporaryTextures(){for(const t of this._temporaryTextures)t.dispose();this._temporaryTextures=[]}bind(t){const e=this._uniforms;if(!this._program){const e=new Map;for(const[t,n]of this._locations)e.set(t,n);const r=[];for(const t of null!==(n=this._transformFeedbackBindings)&&void 0!==n?n:[]){var n;const{index:e,propertyKey:i}=t;r[e]="v_".concat(i)}this._program=new s.B(t,this.vertexShader,this.fragmentShader,e,new Map,r)}const r=this._program;t.useProgram(r);for(const i of this._uniformBindings){const{shaderModulePath:n,uniformName:s,uniformType:u,uniformArrayLength:l}=i,d=(0,o.wc)(n,e);if(null==d){if("sampler2D"===u)continue;throw new Error("Failed to find uniform value for ".concat(n))}switch("array"===u?i.uniformArrayElementType:u){case"sampler2D":{const{unit:e,texture:n}=d;if(r.setUniform1i(s,e),"type"in n)t.bindTexture(n,e);else{const r=(0,a.sZ)(t,n.descriptor,n.data);t.bindTexture(r,e)}break}case"int":if(!l){r.setUniform1i(s,d);break}c(i.uniformName,d,l),r.setUniform1iv(s,d);break;case"float":if(!l){r.setUniform1f(s,d);break}c(i.uniformName,d,l),r.setUniform1fv(s,d);break;case"vec2":if(!l){r.setUniform2f(s,d[0],d[1]);break}c(i.uniformName,d,l),r.setUniform2fv(s,d.flat());break;case"vec3":if(!l){r.setUniform3f(s,d[0],d[1],d[2]);break}c(i.uniformName,d,l),r.setUniform3fv(s,d.flat());break;case"vec4":if(!l){r.setUniform4f(s,d[0],d[1],d[2],d[3]);break}c(i.uniformName,d,l),r.setUniform4fv(s,d.flat());break;case"mat3":r.setUniformMatrix3fv(s,d.flat());break;case"mat4":r.setUniformMatrix4fv(s,d.flat());break;default:throw new Error("Unable to set uniform for type ".concat(u))}}}}},33817:(t,e,n)=>{n.d(e,{F:()=>d});var r=n(35143),i=n(91967),o=n(81806),s=n(67993),a=n(68134),c=n(46053),u=(n(76460),n(47249),n(85842)),l=n(19451);let d=class extends i.A{constructor(t){super(t),this.debugName="",this._updatingHandles=new l.U,this._idToUpdatingState=new s.A}get updating(){const t=this._updatingHandles.updating||Array.from(this._idToUpdatingState.values()).some((t=>t));if((0,o.A)("esri-2d-log-updating")){const e=Array.from(this._idToUpdatingState.entries()).map((t=>{let[e,n]=t;return"-> ".concat(e,": ").concat(n)})).join("\n");console.log("".concat(this.debugName,": Updating: ").concat(t,"\n-> Handles: ").concat(this._updatingHandles.updating,"\n").concat(e))}return t}addUpdateTracking(t,e){const n=(0,a.wB)((()=>e.updating),(e=>this._idToUpdatingState.set(t,e)),{sync:!0});this.addHandles(n)}addPromise(t){return this._updatingHandles.addPromise(t)}};(0,r._)([(0,c.MZ)({constructOnly:!0})],d.prototype,"debugName",void 0),(0,r._)([(0,c.MZ)({readOnly:!0})],d.prototype,"updating",null),d=(0,r._)([(0,u.$)("esri.views.2d.layers.support.UpdateTracking2D")],d)},24245:(t,e,n)=>{var r;n.d(e,{c:()=>r}),function(t){t[t.Pass=0]="Pass",t[t.Draw=1]="Draw"}(r||(r={}))},86994:(t,e,n)=>{n.d(e,{O_:()=>o,vA:()=>i});n(72745),n(43047);(0,n(55855).vt)();class r{constructor(t){this.message=t}toString(){return"AssertException: ".concat(this.message)}}function i(t,e){if(!t){e=e||"Assertion";const t=new Error(e).stack;throw new r("".concat(e," at ").concat(t))}}function o(t,e,n,r){let i,o=(n[0]-t[0])/e[0],s=(r[0]-t[0])/e[0];o>s&&(i=o,o=s,s=i);let a=(n[1]-t[1])/e[1],c=(r[1]-t[1])/e[1];if(a>c&&(i=a,a=c,c=i),o>c||a>s)return!1;a>o&&(o=a),c<s&&(s=c);let u=(n[2]-t[2])/e[2],l=(r[2]-t[2])/e[2];return u>l&&(i=u,u=l,l=i),!(o>l||u>s)&&(l<s&&(s=l),!(s<0))}}}]);
//# sourceMappingURL=9241.90cda791.chunk.js.map