"use strict";(self.webpackChunktyphoon=self.webpackChunktyphoon||[]).push([[8320,2945],{53666:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(35143),s=i(69098),n=i(42553),o=i(18288),a=i(46053),l=(i(81806),i(76460),i(47249),i(6409)),d=i(85842),u=i(90115);let c=class extends((0,s.O)(n.oY)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,o.t)(this.value,this.unit,"milliseconds")}};(0,r._)([(0,l.e)(u.j,{nonNullable:!0})],c.prototype,"unit",void 0),(0,r._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),c=(0,r._)([(0,d.$)("esri.TimeInterval")],c);const p=c},53514:(e,t,i)=>{i.d(t,{T:()=>r,d:()=>f});const r={Base64:0,Hex:1,String:2,Raw:3},s=8,n=(1<<s)-1;function o(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function a(e){const t=[];for(let i=0,r=e.length*s;i<r;i+=s)t[i>>5]|=(e.charCodeAt(i/s)&n)<<i%32;return t}function l(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=s)t.push(String.fromCharCode(e[i>>5]>>>i%32&n));return t.join("")}function d(e,t,i,r,s,n){return o(function(e,t){return e<<t|e>>>32-t}(o(o(t,e),o(r,n)),s),i)}function u(e,t,i,r,s,n,o){return d(t&i|~t&r,e,t,s,n,o)}function c(e,t,i,r,s,n,o){return d(t&r|i&~r,e,t,s,n,o)}function p(e,t,i,r,s,n,o){return d(t^i^r,e,t,s,n,o)}function y(e,t,i,r,s,n,o){return d(i^(t|~r),e,t,s,n,o)}function h(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let a=0;a<e.length;a+=16){const t=i,l=r,d=s,h=n;i=u(i,r,s,n,e[a],7,-680876936),n=u(n,i,r,s,e[a+1],12,-389564586),s=u(s,n,i,r,e[a+2],17,606105819),r=u(r,s,n,i,e[a+3],22,-1044525330),i=u(i,r,s,n,e[a+4],7,-176418897),n=u(n,i,r,s,e[a+5],12,1200080426),s=u(s,n,i,r,e[a+6],17,-1473231341),r=u(r,s,n,i,e[a+7],22,-45705983),i=u(i,r,s,n,e[a+8],7,1770035416),n=u(n,i,r,s,e[a+9],12,-1958414417),s=u(s,n,i,r,e[a+10],17,-42063),r=u(r,s,n,i,e[a+11],22,-1990404162),i=u(i,r,s,n,e[a+12],7,1804603682),n=u(n,i,r,s,e[a+13],12,-40341101),s=u(s,n,i,r,e[a+14],17,-1502002290),r=u(r,s,n,i,e[a+15],22,1236535329),i=c(i,r,s,n,e[a+1],5,-165796510),n=c(n,i,r,s,e[a+6],9,-1069501632),s=c(s,n,i,r,e[a+11],14,643717713),r=c(r,s,n,i,e[a],20,-373897302),i=c(i,r,s,n,e[a+5],5,-701558691),n=c(n,i,r,s,e[a+10],9,38016083),s=c(s,n,i,r,e[a+15],14,-660478335),r=c(r,s,n,i,e[a+4],20,-405537848),i=c(i,r,s,n,e[a+9],5,568446438),n=c(n,i,r,s,e[a+14],9,-1019803690),s=c(s,n,i,r,e[a+3],14,-187363961),r=c(r,s,n,i,e[a+8],20,1163531501),i=c(i,r,s,n,e[a+13],5,-1444681467),n=c(n,i,r,s,e[a+2],9,-51403784),s=c(s,n,i,r,e[a+7],14,1735328473),r=c(r,s,n,i,e[a+12],20,-1926607734),i=p(i,r,s,n,e[a+5],4,-378558),n=p(n,i,r,s,e[a+8],11,-2022574463),s=p(s,n,i,r,e[a+11],16,1839030562),r=p(r,s,n,i,e[a+14],23,-35309556),i=p(i,r,s,n,e[a+1],4,-1530992060),n=p(n,i,r,s,e[a+4],11,1272893353),s=p(s,n,i,r,e[a+7],16,-155497632),r=p(r,s,n,i,e[a+10],23,-1094730640),i=p(i,r,s,n,e[a+13],4,681279174),n=p(n,i,r,s,e[a],11,-358537222),s=p(s,n,i,r,e[a+3],16,-722521979),r=p(r,s,n,i,e[a+6],23,76029189),i=p(i,r,s,n,e[a+9],4,-640364487),n=p(n,i,r,s,e[a+12],11,-421815835),s=p(s,n,i,r,e[a+15],16,530742520),r=p(r,s,n,i,e[a+2],23,-995338651),i=y(i,r,s,n,e[a],6,-198630844),n=y(n,i,r,s,e[a+7],10,1126891415),s=y(s,n,i,r,e[a+14],15,-1416354905),r=y(r,s,n,i,e[a+5],21,-57434055),i=y(i,r,s,n,e[a+12],6,1700485571),n=y(n,i,r,s,e[a+3],10,-1894986606),s=y(s,n,i,r,e[a+10],15,-1051523),r=y(r,s,n,i,e[a+1],21,-2054922799),i=y(i,r,s,n,e[a+8],6,1873313359),n=y(n,i,r,s,e[a+15],10,-30611744),s=y(s,n,i,r,e[a+6],15,-1560198380),r=y(r,s,n,i,e[a+13],21,1309151649),i=y(i,r,s,n,e[a+4],6,-145523070),n=y(n,i,r,s,e[a+11],10,-1120210379),s=y(s,n,i,r,e[a+2],15,718787259),r=y(r,s,n,i,e[a+9],21,-343485551),i=o(i,t),r=o(r,l),s=o(s,d),n=o(n,h)}return[i,r,s,n]}function f(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Hex)||r.Base64,i=h(a(e),e.length*s);switch(t){case r.Raw:return i;case r.Hex:return function(e){const t="0123456789abcdef",i=[];for(let r=0,s=4*e.length;r<s;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}(i);case r.String:return l(i);case r.Base64:return function(e){const t=[];for(let i=0,r=4*e.length;i<r;i+=3){const r=(e[i>>2]>>i%4*8&255)<<16|(e[i+1>>2]>>(i+1)%4*8&255)<<8|e[i+2>>2]>>(i+2)%4*8&255;for(let s=0;s<4;s++)8*i+6*s>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-s)&63))}return t.join("")}(i)}}},37546:(e,t,i)=>{i.d(t,{P:()=>y});var r=i(50076),s=i(53514),n=i(24387),o=i(90534),a=i(49723),l=i(19258),d=i(49140),u=i(46053),c=i(95474),p=i(79453);function y(e){var t;const i=null!==(t=null===e||void 0===e?void 0:e.origins)&&void 0!==t?t:[void 0];return(t,r)=>{const s=function(e,t,i){var r;if("resource"===(null===e||void 0===e?void 0:e.type))return function(e,t,i){const r=(0,l.z4)(t,i);return{type:String,read:(e,t,i)=>{const s=(0,p.r)(e,t,i);return r.type===String?s:"function"==typeof r.type?new r.type({url:s}):void 0},write:{writer(t,s,a,l){if(null===l||void 0===l||!l.resources)return"string"==typeof t?void(s[a]=(0,p.t)(t,l)):void(s[a]=t.write({},l));const u=function(e){return null==e?null:"string"==typeof e?e:e.url}(t),y=(0,p.t)(u,{...l,verifyItemRelativeUrls:null!==l&&void 0!==l&&l.verifyItemRelativeUrls?{writtenUrls:l.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},p.M.NO),m=r.type!==String&&(!(0,n.H)(this)||(null===l||void 0===l?void 0:l.origin)&&this.originIdOf(i)>(0,d.aB)(l.origin)),g={object:this,propertyName:i,value:t,targetUrl:y,dest:s,targetPropertyName:a,context:l,params:e};null!==l&&void 0!==l&&l.portalItem&&y&&!(0,o.oP)(y)?m&&null!==e&&void 0!==e&&e.contentAddressed?h(g):m?function(e){var t;const{context:i,targetUrl:r,params:s,value:n,dest:a,targetPropertyName:l}=e;if(!i.portalItem)return;const d=i.portalItem.resourceFromPath(r),u=v(n,r,i),p=(0,c.n)(u),y=(0,o.Zo)(d.path),m=null!==(t=null===s||void 0===s?void 0:s.compress)&&void 0!==t&&t;p===y?(i.resources&&f({...e,resource:d,content:u,compress:m,updates:i.resources.toUpdate}),a[l]=r):h(e)}(g):function(e){let{context:t,targetUrl:i,dest:r,targetPropertyName:s}=e;t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),r[s]=i)}(g):null!==l&&void 0!==l&&l.portalItem&&(null==y||null!=(0,p.i)(y)||(0,o.w8)(y)||m)?h(g):s[a]=y}}}}(e,t,i);switch(null!==(r=null===e||void 0===e?void 0:e.type)&&void 0!==r?r:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=p.b;return{read:e,write:t}}}}(e,t,r);for(const e of i){const i=(0,u.rM)(t,e,r);for(const e in s)i[e]=s[e]}}}function h(e){var t,i,n,l;const{targetUrl:d,params:u,value:y,context:h,dest:m,targetPropertyName:g}=e;if(!h.portalItem)return;const w=(0,p.p)(d),I=v(y,d,h);if(null!==u&&void 0!==u&&u.contentAddressed&&"json"!==I.type)return void(null===(t=h.messages)||void 0===t||t.push(new r.A("persistable:contentAddressingUnsupported",'Property "'.concat(g,'" is trying to serializing a resource with content of type ').concat(I.type," with content addressing. Content addressing is only supported for json resources."),{content:I})));const b=null!==u&&void 0!==u&&u.contentAddressed&&"json"===I.type?(0,s.d)(I.jsonString):null!==(i=null===w||void 0===w?void 0:w.filename)&&void 0!==i?i:(0,a.lk)(),_=(0,o.fj)(null!==(n=null===u||void 0===u?void 0:u.prefix)&&void 0!==n?n:null===w||void 0===w?void 0:w.prefix,b),A="".concat(_,".").concat((0,c.n)(I));if(null!==u&&void 0!==u&&u.contentAddressed&&h.resources&&"json"===I.type){var F;const e=null!==(F=h.resources.toKeep.find((e=>{let{resource:t}=e;return t.path===A})))&&void 0!==F?F:h.resources.toAdd.find((e=>{let{resource:t}=e;return t.path===A}));if(e)return void(m[g]=e.resource.itemRelativeUrl)}const S=h.portalItem.resourceFromPath(A);(0,o.w8)(d)&&h.resources&&h.resources.pendingOperations.push((0,o.tk)(d).then((e=>{S.path="".concat(_,".").concat((0,c.n)({type:"blob",blob:e})),m[g]=S.itemRelativeUrl})).catch((()=>{})));const L=null!==(l=null===u||void 0===u?void 0:u.compress)&&void 0!==l&&l;h.resources&&f({...e,resource:S,content:I,compress:L,updates:h.resources.toAdd}),m[g]=S.itemRelativeUrl}function f(e){let{object:t,propertyName:i,updates:r,resource:s,content:n,compress:o}=e;r.push({resource:s,content:n,compress:o,finish:e=>{!function(e,t,i){"string"==typeof e[t]?e[t]=i.url:e[t].url=i.url}(t,i,e)}})}function v(e,t,i){return"string"==typeof e?{type:"url",url:t}:{type:"json",jsonString:JSON.stringify(e.toJSON(i))}}},48320:(e,t,i)=>{i.r(t),i.d(t,{default:()=>je});var r=i(35143),s=i(39356),n=i(16868),o=(i(63844),i(14873),i(47662),i(72690),i(86946),i(71832),i(5766),i(35039),i(86616),i(31382)),a=i(69098),l=i(94643),d=i(50076),u=i(76460),c=i(77717),p=i(50346),y=i(68134),h=i(46053),f=(i(81806),i(47249),i(39314)),v=i(28379),m=i(85842),g=i(49140),w=i(22923),I=i(19247),b=i(25515),_=i(45652),A=i(12406),F=i(19502),S=i(31362),L=i(61979),M=i(11270),E=i(94729),T=i(5682),x=i(90260),j=i(78817),P=i(82111),O=i(53666),Z=i(42553),U=i(53430);function R(e){var t;let{associatedLayer:i,serviceUpdateTimeStamp:r}=e;const s=null===i||void 0===i||null===(t=i.editingInfo)||void 0===t?void 0:t.lastEditDate,n=null===i||void 0===i?void 0:i.serverGens,o=null!=s,a=null!=r,l=o&&a&&r.lastUpdate!==s.getTime();return o&&(l||!a&&(null===n||void 0===n?void 0:n.minServerGen)!==(null===n||void 0===n?void 0:n.serverGen))}var D=i(83982);const N=e=>{let t=class extends e{constructor(){super(...arguments),this.serviceTimeInfo=null}get timeInfo(){var e;const t=null===(e=this.associatedLayer)||void 0===e?void 0:e.timeInfo;if(null==t)return null;const i=t.clone();return(0,U.sv)(i,this.fieldsIndex),i}set timeInfo(e){(0,U.sv)(e,this.fieldsIndex),this._override("timeInfo",e)}get timeExtent(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.timeExtent}set timeExtent(e){this._override("timeExtent",e)}get timeOffset(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.timeOffset}set timeOffset(e){this._override("timeOffset",e)}get datesInUnknownTimezone(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.datesInUnknownTimezone)&&void 0!==e&&e}set datesInUnknownTimezone(e){this._override("datesInUnknownTimezone",e)}async loadTimeInfoFromService(e){const{serviceTimeInfo:t}=this;if(null==t)return;const{startTimeField:i,endTimeField:r}=t;if(null==i&&null==r)return;if(R({associatedLayer:this.associatedLayer,serviceUpdateTimeStamp:this.serviceUpdateTimeStamp}))return;const s=async t=>{let r=null;try{var s;const i=await(null===(s=this.fetchStatistics)||void 0===s?void 0:s.call(this,t,e));r=null===i||void 0===i?void 0:i.stats}catch{}if(null==r)return null;const{minTimeStr:n,min:o,maxTimeStr:a,max:l}=r,d=t===i?null!==n&&void 0!==n?n:o:null!==a&&void 0!==a?a:l;return null!=d?new Date(d):null},[n,o]=await Promise.all([s(i),s(r)]);if(null!=i&&null==n||null!=r&&null==o)return;const a=new P.A({start:n,end:o});this.setAtOrigin("timeInfo",new D.A({endField:r,startField:i,fullTimeExtent:a}),"service")}};return(0,r._)([(0,h.MZ)({type:D.A,json:{read:!1,write:!1}})],t.prototype,"timeInfo",null),(0,r._)([(0,h.MZ)({type:P.A,json:{read:!1,write:!1}})],t.prototype,"timeExtent",null),(0,r._)([(0,h.MZ)({type:O.A,json:{read:!1,write:!1}})],t.prototype,"timeOffset",null),(0,r._)([(0,h.MZ)({type:Boolean,nonNullable:!0,json:{read:!1,write:!1}})],t.prototype,"datesInUnknownTimezone",null),(0,r._)([(0,h.MZ)({type:C,readOnly:!0,json:{read:{source:"timeInfo"}}})],t.prototype,"serviceTimeInfo",void 0),t=(0,r._)([(0,m.$)("esri.layers.mixins.TemporalSceneLayer")],t),t};let C=class extends Z.oY{constructor(){super(...arguments),this.endTimeField=null,this.startTimeField=null}};(0,r._)([(0,h.MZ)({type:String})],C.prototype,"endTimeField",void 0),(0,r._)([(0,h.MZ)({type:String})],C.prototype,"startTimeField",void 0),C=(0,r._)([(0,m.$)("esri.layers.mixins.TemporalSceneLayer.SceneServiceTimeInfo")],C);var k=i(13096),q=i(39323),V=i(16981),H=i(95363),G=i(46326),Q=i(80524),K=i(89672),W=i(76350),B=i(1900),z=i(2395),J=i(19463),$=i(71401),Y=i(27937),X=i(5618),ee=i(62487);let te=class extends Z.oY{constructor(){super(...arguments),this.name=null,this.field=null,this.currentRangeExtent=null,this.fullRangeExtent=null,this.type="rangeInfo"}};(0,r._)([(0,h.MZ)({type:String,json:{read:!0,write:!0}})],te.prototype,"name",void 0),(0,r._)([(0,h.MZ)({type:String,json:{read:!0,write:!0}})],te.prototype,"field",void 0),(0,r._)([(0,h.MZ)({type:[Number],json:{read:!0,write:!0}})],te.prototype,"currentRangeExtent",void 0),(0,r._)([(0,h.MZ)({type:[Number],json:{read:!0,write:!0}})],te.prototype,"fullRangeExtent",void 0),(0,r._)([(0,h.MZ)({type:["rangeInfo"],readOnly:!0,json:{read:!1,write:!0}})],te.prototype,"type",void 0),te=(0,r._)([(0,m.$)("esri.layers.support.RangeInfo")],te);var ie,re=i(3825),se=i(53084),ne=i(37546),oe=i(62754),ae=i(65215),le=i(26346);let de=ie=class extends((0,Z.Te)(l.A.ofType(ae.A))){constructor(e){super(e)}clone(){return new ie(this.items.map((e=>e.clone())))}write(e,t){return this.toJSON(t)}toJSON(e){var t;const i=null===e||void 0===e||null===(t=e.layer)||void 0===t?void 0:t.spatialReference;return i?this.toArray().map((t=>{if(!i.equals(t.spatialReference)){if(!(0,le.canProjectWithoutEngine)(t.spatialReference,i))return null!==e&&void 0!==e&&e.messages&&e.messages.push(new oe.A("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const r=new ae.A;(0,le.projectPolygon)(t,r,i),t=r}const r=t.toJSON(e);return delete r.spatialReference,r})).filter((e=>null!=e)):(null!==e&&void 0!==e&&e.messages&&e.messages.push(new oe.A("scenefilter:unsupported","Writing Scene filters without context layer is not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),this.toArray().map((t=>t.toJSON(e))))}static fromJSON(e,t){const i=new ie;return e.forEach((e=>i.add(ae.A.fromJSON(e,t)))),i}};de=ie=(0,r._)([(0,m.$)("esri.layers.support.PolygonCollection")],de);const ue=de;var ce,pe=i(79453);let ye=ce=class extends Z.oY{constructor(e){super(e),this.spatialRelationship="disjoint",this.geometries=new ue,this._geometriesSource=null}initialize(){this.addHandles((0,y.on)((()=>this.geometries),"after-changes",(()=>this.geometries=this.geometries),y.OH))}readGeometries(e,t,i){Array.isArray(e)?this.geometries=ue.fromJSON(e,i):this._geometriesSource={url:(0,pe.f)(e,i),context:i}}async loadGeometries(e,t){if(null==this._geometriesSource)return;const{url:i,context:r}=this._geometriesSource,s=await(0,re.A)(i,{responseType:"json",signal:null===t||void 0===t?void 0:t.signal}),n=e.toJSON(),o=s.data.map((e=>({...e,spatialReference:n})));this.geometries=ue.fromJSON(o,r),this._geometriesSource=null}clone(){const e=new ce({geometries:(0,se.o8)(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}};(0,r._)([(0,h.MZ)({type:["disjoint","contains"],nonNullable:!0,json:{write:!0}})],ye.prototype,"spatialRelationship",void 0),(0,r._)([(0,h.MZ)({type:ue,nonNullable:!0,json:{write:!0}}),(0,ne.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],ye.prototype,"geometries",void 0),(0,r._)([(0,v.w)(["web-scene","portal-item"],"geometries")],ye.prototype,"readGeometries",null),ye=ce=(0,r._)([(0,m.$)("esri.layers.support.SceneFilter")],ye);const he=ye;var fe=i(90534);var ve=i(81589),me=i(97015),ge=i(12482),we=i(31111),Ie=i(30973);async function be(e){const t=[];for(const i of e)i.name.toLowerCase().endsWith(".zip")?t.push(_e(i)):t.push(Promise.resolve(i));return(await Promise.all(t)).flat()}async function _e(e){const{BlobReader:t,ZipReader:r,BlobWriter:s}=await i.e(5795).then(i.bind(i,85795)),n=[],o=new r(new t(e));return(await o.getEntries()).forEach((e=>{var t;if(e.directory||/^__MACOS/i.test(e.filename))return;const i=new s,r=null===(t=e.getData)||void 0===t?void 0:t.call(e,i).then((t=>new File([t],e.filename)));r&&n.push(r)})),Promise.all(n)}var Ae=i(68664),Fe=i(2257),Se=i(2183);const Le=new Set(["3DObject","Point"]),Me=(0,W.p)();let Ee=class extends(N((0,L.w6)((0,x.w6)((0,F.b)((0,M.q)((0,E.A)((0,T.j)((0,c.P)((0,S.d)((0,A.p)((0,a.O)(b.A)))))))))))){constructor(){super(...arguments),this.featureReduction=null,this.rangeInfos=null,this.operationalLayerType="ArcGISSceneServiceLayer",this.type="scene",this.fields=null,this.floorInfo=null,this.outFields=null,this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.excludeObjectIds=new l.A,this.definitionExpression=null,this.filter=null,this.path=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.priority=null,this.semantic=null,this.cachedDrawingInfo={color:!1},this.popupEnabled=!0,this.popupTemplate=null,this.objectIdField=null,this.globalIdField=null,this._fieldUsageInfo={},this.screenSizePerspectiveEnabled=!0,this.serviceItemId=void 0}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}destroy(){this._set("renderer",null)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){var i,r,s;const n=null===(i=this.getFeatureType(null===t||void 0===t?void 0:t.feature))||void 0===i||null===(i=i.domains)||void 0===i?void 0:i[e];return n&&"inherited"!==n.type?n:null!==(r=null===(s=this.getField(e))||void 0===s?void 0:s.domain)&&void 0!==r?r:null}getFeatureType(e){return e&&this.associatedLayer?this.associatedLayer.getFeatureType(e):null}get types(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.types)&&void 0!==e?e:[]}get typeIdField(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.typeIdField)&&void 0!==e?e:null}get templates(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.templates)&&void 0!==e?e:null}get formTemplate(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.formTemplate)&&void 0!==e?e:null}get fieldsIndex(){return new B.A(this.fields)}readNodePages(e,t,i){return"Point"===t.layerType&&(e=t.pointNodePages),null==e||"object"!=typeof e?null:z.W4.fromJSON(e,i)}set elevationInfo(e){this._set("elevationInfo",e),this.loaded&&this._validateElevationInfo()}get effectiveCapabilities(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.effectiveCapabilities)}get effectiveEditingEnabled(){return null!=this.associatedLayer&&(0,G.C$)(this.associatedLayer)}get geometryType(){return xe[this.profile]||"mesh"}set renderer(e){(0,U.yp)(e,this.fieldsIndex),this._set("renderer",e)}readCachedDrawingInfo(e){return null!=e&&"object"==typeof e||(e={}),null==e.color&&(e.color=!1),e}get capabilities(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.capabilities)}_capabilitiesFromAssociatedFeatureLayer(e){var t;e=null!=e?e:V.P;const{query:i,queryRelated:r,editing:{supportsGlobalId:s,supportsRollbackOnFailure:n,supportsUploadWithItemId:o,supportsGeometryUpdate:a,supportsReturnServiceEditsInSourceSpatialReference:l},data:{supportsZ:d,supportsM:u,isVersioned:c,supportsAttachment:p},operations:{supportsEditing:y,supportsAdd:h,supportsUpdate:f,supportsDelete:v,supportsQuery:m,supportsQueryAttachments:g,supportsAsyncConvert3D:w}}=e,I=e.operations.supportsChangeTracking,b=!(null===(t=this.associatedLayer)||void 0===t||!t.infoFor3D)&&(0,we.Vo)();return{query:i,queryRelated:r,editing:{supportsGlobalId:s,supportsReturnServiceEditsInSourceSpatialReference:l,supportsRollbackOnFailure:n,supportsGeometryUpdate:b&&a,supportsUploadWithItemId:o},data:{supportsAttachment:p,supportsZ:d,supportsM:u,isVersioned:c},operations:{supportsQuery:m,supportsQueryAttachments:g,supportsEditing:y&&I,supportsAdd:b&&h&&I,supportsDelete:b&&v&&I,supportsUpdate:f&&I,supportsAsyncConvert3D:w}}}get editingEnabled(){var e,t;return this._isOverridden("editingEnabled")?this._get("editingEnabled"):null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.editingEnabled)&&void 0!==e&&e}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}get infoFor3D(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.infoFor3D)&&void 0!==e?e:null}get relationships(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.relationships}get defaultPopupTemplate(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null}readObjectIdField(e,t){return!e&&t.fields&&t.fields.some((t=>("esriFieldTypeOID"===t.type&&(e=t.name),!!e))),e||void 0}readGlobalIdField(e,t){return!e&&t.fields&&t.fields.some((t=>("esriFieldTypeGlobalID"===t.type&&(e=t.name),!!e))),e||void 0}get displayField(){var e,t;return null!==(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.displayField)&&void 0!==e?e:null}readProfile(e,t){const i=t.store.profile;return null!=i&&Te[i]?Te[i]:(u.A.getLogger(this).error("Unknown or missing profile",{profile:i,layer:this}),"mesh-pyramids")}get useViewTime(){var e,t;return null===(e=null===(t=this.associatedLayer)||void 0===t?void 0:t.useViewTime)||void 0===e||e}set useViewTime(e){this._override("useViewTime",e)}load(e){return this.addResolvingPromise(this._load(e)),Promise.resolve(this)}async _load(e){const t=null!=e?e.signal:null;await this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(p.QP),await this._fetchService(t),await Promise.all([this._fetchIndexAndUpdateExtent(this.nodePages,t),this._setAssociatedFeatureLayer(t),this._loadFilterGeometries()]),this._validateElevationInfo(),this._applyAssociatedLayerOverrides(),this._populateFieldUsageInfo(),await this.loadTimeInfoFromService(e),await(0,ve.L)(this,{origin:"service"},t),(0,U.yp)(this.renderer,this.fieldsIndex),await this.finishLoadEditablePortalLayer(e)}async beforeSave(){null!=this.filter&&(this.filter=this.filter.clone(),await this.load())}async _loadFilterGeometries(){if(this.filter)try{await this.filter.loadGeometries(this.spatialReference)}catch(e){u.A.getLogger(this).error("#_loadFilterGeometries()",this,"Failed to load filter geometries. Geometry filter will not be applied for this layer.",{error:e}),this.filter=null}}createQuery(){var e;const t=new me.A;return"mesh"===this.geometryType?(null===(e=this.associatedLayer)||void 0===e?void 0:e.infoFor3D)&&(t.returnGeometry=!0):(t.returnGeometry=!0,t.returnZ=!0),t.where=this.definitionExpression||"1=1",t.sqlFormat="standard",t.outFields=["*"],t}queryExtent(e,t){return this._getAssociatedLayerForQuery().then((i=>i.queryExtent(e||this.createQuery(),t)))}queryFeatureCount(e,t){return this._getAssociatedLayerForQuery().then((i=>i.queryFeatureCount(e||this.createQuery(),t)))}queryFeatures(e,t){return this._getAssociatedLayerForQuery().then((i=>i.queryFeatures(e||this.createQuery(),t))).then((e=>{if(null!==e&&void 0!==e&&e.features)for(const t of e.features)t.layer=this,t.sourceLayer=this;return e}))}async queryRelatedFeatures(e,t){if(await this.load(),!this.associatedLayer)throw new d.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});return this.associatedLayer.queryRelatedFeatures(e,t)}async queryRelatedFeaturesCount(e,t){if(await this.load(),!this.associatedLayer)throw new d.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});return this.associatedLayer.queryRelatedFeaturesCount(e,t)}async queryCachedAttributes(e,t){var i,r,s;const n=(0,U.hL)(this.fieldsIndex,await(0,Fe.TO)(this,(0,Fe.D8)(this)));return(0,Ae.s1)(null!==(i=null===(r=this.parsedUrl)||void 0===r?void 0:r.path)&&void 0!==i?i:"",null!==(s=this.attributeStorageInfo)&&void 0!==s?s:[],e,t,n,this.apiKey,this.customParameters)}async queryCachedFeature(e,t){const i=await this.queryCachedAttributes(e,[t]);if(!i||0===i.length)throw new d.A("scenelayer:feature-not-in-cached-data","Feature not found in cached data");const r=new s.A;return r.attributes=i[0],r.layer=this,r.sourceLayer=this,r}queryObjectIds(e,t){return this._getAssociatedLayerForQuery().then((i=>i.queryObjectIds(e||this.createQuery(),t)))}queryAttachments(e,t){return this._getAssociatedLayerForQuery().then((i=>i.queryAttachments(e,t)))}getFieldUsageInfo(e){const t={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||t:(u.A.getLogger(this).error("#getFieldUsageInfo()","Unavailable until layer is loaded"),t)}createPopupTemplate(e){return(0,Ie.tn)(this,e)}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return null!==e&&void 0!==e&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),!this.associatedLayer)throw new d.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new d.A("scenelayer:query-not-available","SceneLayer associated feature layer could not be loaded",{layer:this,error:e})}return this.associatedLayer}hasCachedStatistics(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((t=>t.name===e))}async queryCachedStatistics(e,t){return await this.load(t),await this.fetchStatistics(e,t)}async saveAs(e,t){return this._debouncedSaveOperations(x.Xh.SAVE_AS,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"scene"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"scene"};return this._debouncedSaveOperations(x.Xh.SAVE,e)}async applyEdits(e,t){var r,s;const{applyEdits:n}=await i.e(2229).then(i.bind(i,54610));let o=t;await this.load();const a=this.associatedLayer;if(!a)throw new d.A("".concat(this.type,"-layer:not-editable"),"Service is not editable");await a.load();const{globalIdField:l}=a,u=!!a.infoFor3D,c=null===(r=null===(s=o)||void 0===s?void 0:s.globalIdUsed)||void 0===r||r;if(u&&null==l)throw new d.A("".concat(this.type,"-layer:not-editable"),"Valid globalIdField expected on editable SceneLayer");if(u&&!c)throw new d.A("".concat(this.type,"-layer:globalid-required"),"globalIdUsed must not be false for SceneLayer editing as globalIds are required.");return(0,k.Wo)(a.url)&&u&&null!=e.deleteFeatures&&null!=l&&(o={...o,globalIdToObjectId:await(0,G.GA)(a,e.deleteFeatures,l)}),n(this,a.source,e,o)}async uploadAssets(e,t){if(await this.load(),null==this.associatedLayer)throw new d.A("".concat(this.type,"-layer:not-editable"),"Service is not editable");return await this.associatedLayer.load(),this.associatedLayer.uploadAssets(e,t)}on(e,t){return super.on(e,t)}async convertMesh(e,t){var i;const r=e=>{throw u.A.getLogger(this).error(".convertMesh()",e.message),e};await this.load(),this.infoFor3D||r(new d.A("invalid:layer","SceneLayer has no capability for mesh conversion"));const s=await this.extractAndFilterFiles(e),n=s.reduce(((e,t)=>(0,J.oF)(this.infoFor3D,t)?e+1:e),0);0===n&&r(new _.VP),n>1&&r(new _.XQ);const o=this.spatialReference,a=null!==(i=null===t||void 0===t?void 0:t.location)&&void 0!==i?i:new I.A({x:0,y:0,z:0,spatialReference:o}),l=a.spatialReference.isGeographic?"local":"georeferenced",c=w.A.createWithExternalSource(a,s,{vertexSpace:l}),[p]=await this.uploadAssets([c],t);return p}async extractAndFilterFiles(e){await this.load();const t=this.infoFor3D;return t?(await be(e)).filter((e=>(0,J.fu)(t,e))):e}validateLayer(e){if(e.layerType&&!Le.has(e.layerType))throw new d.A("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new d.A("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});if(this.version.major>2)throw new d.A("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});!function(e,t){let i=!1,r=!1;if(null==e)i=!0,r=!0;else{const s=t&&t.isGeographic;switch(e){case"east-north-up":case"earth-centered":i=!0,r=s;break;case"vertex-reference-frame":i=!0,r=!s;break;default:i=!1}}if(!i)throw new d.A("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");if(!r)throw new d.A("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.")}(this.normalReferenceFrame,this.spatialReference)}_getTypeKeywords(){const e=[];if("points"===this.profile)e.push("Point");else{if("mesh-pyramids"!==this.profile)throw new d.A("scenelayer:unknown-profile","SceneLayer:save() encountered an unknown SceneLayer profile: "+this.profile);e.push("3DObject")}return e}_populateFieldUsageInfo(){if(this._fieldUsageInfo={},this.fields)for(const i of this.fields){var e,t;const r=!(null===(e=this.attributeStorageInfo)||void 0===e||!e.some((e=>e.name===i.name))),s=!(null===(t=this.associatedLayer)||void 0===t||null===(t=t.fields)||void 0===t||!t.some((e=>e&&i.name===e.name))),n={supportsLabelingInfo:r,supportsRenderer:r,supportsPopupTemplate:r||s,supportsLayerQuery:s};this._fieldUsageInfo[i.name]=n}}_applyAssociatedLayerOverrides(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides(),this._applyAssociatedLayerExtentOverride(),this._applyAssociatedLayerPrivileges()}_applyAssociatedLayerFieldsOverrides(){var e;if(null===(e=this.associatedLayer)||void 0===e||!e.fields)return;let t=null;for(const i of this.associatedLayer.fields){const e=this.getField(i.name);e?(!e.domain&&i.domain&&(e.domain=i.domain.clone()),e.editable=i.editable,e.nullable=i.nullable,e.length=i.length):(t||(t=this.fields?this.fields.slice():[]),t.push(i.clone()))}t&&this._set("fields",t)}_applyAssociatedLayerPopupOverrides(){if(!this.associatedLayer)return;const e=["popupTemplate","popupEnabled"],t=(0,f.oY)(this);for(let i=0;i<e.length;i++){const r=e[i],s=this.originIdOf(r),n=this.associatedLayer.originIdOf(r);s<n&&(n===g.Gr.SERVICE||n===g.Gr.PORTAL_ITEM)&&t.setAtOrigin(r,this.associatedLayer[r],n)}}_applyAssociatedLayerExtentOverride(){var e,t,i;const r=null===(e=this.associatedLayer)||void 0===e?void 0:e.getAtOrigin("fullExtent","service");(0,we.Vo)()&&null!=(null===(t=this.associatedLayer)||void 0===t?void 0:t.infoFor3D)&&r&&(0,k.Wo)(null===(i=this.associatedLayer)||void 0===i?void 0:i.url)&&R(this)&&(0,f.oY)(this).setAtOrigin("fullExtent",r.clone(),g.Gr.SERVICE)}_applyAssociatedLayerPrivileges(){const e=this.associatedLayer;e&&(this._set("userHasEditingPrivileges",e.userHasEditingPrivileges),this._set("userHasFullEditingPrivileges",e.userHasFullEditingPrivileges),this._set("userHasUpdateItemPrivileges",e.userHasUpdateItemPrivileges))}async _setAssociatedFeatureLayer(e){if(["mesh-pyramids","points"].includes(this.profile))try{const{serverUrl:t,layerId:i,portalItem:r}=await(0,q.L)("".concat(this.url,"/layers/").concat(this.layerId),{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:e}),s=await ee.S.FeatureLayer();this.associatedLayer=new s({url:t,customParameters:this.customParameters,layerId:i,portalItem:r}),await this.associatedLayer.load()}catch(_e){(0,p.zf)(_e)||this._logWarningOnPopupEnabled()}}async _logWarningOnPopupEnabled(){await(0,y.C_)((()=>this.popupEnabled&&null!=this.popupTemplate));const e="this SceneLayer: ".concat(this.title);null==this.attributeStorageInfo?u.A.getLogger(this).warn("Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ".concat(e)):u.A.getLogger(this).info("Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ".concat(e))}_validateElevationInfo(){const e=this.elevationInfo;"mesh-pyramids"===this.profile&&(0,ge.XF)(u.A.getLogger(this),(0,ge.$7)("Mesh scene layers","relative-to-scene",e)),(0,ge.XF)(u.A.getLogger(this),(0,ge.tW)("Scene layers",e))}async fetchStatistics(e,t){var i,r;return await async function(e){let{fieldName:t,statisticsInfo:i,errorContext:r,fieldsIndex:s,path:n,customParameters:o,apiKey:a,signal:l}=e;if(null==i)throw new d.A("".concat(r,":no-cached-statistics"),"Cached statistics are not available for this layer");const u=s.get(t);if(null==u)throw new d.A("".concat(r,":field-unexisting"),"Field '".concat(t,"' does not exist on the layer"));const c=i.find((e=>e.name===u.name));if(null==c)throw new d.A("".concat(r,":no-cached-statistics"),"Cached statistics for this attribute are not available");const p=(0,fe.fj)(n,c.href),{data:y}=await(0,re.A)(p,{query:{f:"json",...o,token:a},responseType:"json",signal:l});return y}({fieldName:e,statisticsInfo:this.statisticsInfo,errorContext:"scenelayer",fieldsIndex:this.fieldsIndex,path:null!==(i=null===(r=this.parsedUrl)||void 0===r?void 0:r.path)&&void 0!==i?i:"",customParameters:this.customParameters,apiKey:this.apiKey,signal:null===t||void 0===t?void 0:t.signal})}};(0,r._)([(0,h.MZ)({types:{key:"type",base:Q.c,typeMap:{selection:K.A}},json:{origins:{"web-scene":{name:"layerDefinition.featureReduction",write:!0},"portal-item":{name:"layerDefinition.featureReduction",write:!0}}}})],Ee.prototype,"featureReduction",void 0),(0,r._)([(0,h.MZ)({type:[te],json:{read:!1,origins:{"web-scene":{name:"layerDefinition.rangeInfos",write:!0},"portal-item":{name:"layerDefinition.rangeInfos",write:!0}}}})],Ee.prototype,"rangeInfos",void 0),(0,r._)([(0,h.MZ)({json:{read:!1}})],Ee.prototype,"associatedLayer",void 0),(0,r._)([(0,h.MZ)({type:["show","hide"]})],Ee.prototype,"listMode",void 0),(0,r._)([(0,h.MZ)({type:["ArcGISSceneServiceLayer"]})],Ee.prototype,"operationalLayerType",void 0),(0,r._)([(0,h.MZ)({json:{read:!1},readOnly:!0})],Ee.prototype,"type",void 0),(0,r._)([(0,h.MZ)({...Me.fields,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Ee.prototype,"fields",void 0),(0,r._)([(0,h.MZ)()],Ee.prototype,"types",null),(0,r._)([(0,h.MZ)()],Ee.prototype,"typeIdField",null),(0,r._)([(0,h.MZ)()],Ee.prototype,"templates",null),(0,r._)([(0,h.MZ)()],Ee.prototype,"formTemplate",null),(0,r._)([(0,h.MZ)({readOnly:!0,clonable:!1})],Ee.prototype,"fieldsIndex",null),(0,r._)([(0,h.MZ)({type:X.A,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Ee.prototype,"floorInfo",void 0),(0,r._)([(0,h.MZ)(Me.outFields)],Ee.prototype,"outFields",void 0),(0,r._)([(0,h.MZ)({type:z.W4,readOnly:!0,json:{read:!1}})],Ee.prototype,"nodePages",void 0),(0,r._)([(0,v.w)("service","nodePages",["nodePages","pointNodePages"])],Ee.prototype,"readNodePages",null),(0,r._)([(0,h.MZ)({type:[z.uV],readOnly:!0})],Ee.prototype,"materialDefinitions",void 0),(0,r._)([(0,h.MZ)({type:[z.Ot],readOnly:!0})],Ee.prototype,"textureSetDefinitions",void 0),(0,r._)([(0,h.MZ)({type:[z.L0],readOnly:!0})],Ee.prototype,"geometryDefinitions",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],Ee.prototype,"serviceUpdateTimeStamp",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],Ee.prototype,"attributeStorageInfo",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],Ee.prototype,"statisticsInfo",void 0),(0,r._)([(0,h.MZ)({type:l.A.ofType(Number),nonNullable:!0,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.excludeObjectIds",write:{enabled:!0}}})],Ee.prototype,"excludeObjectIds",void 0),(0,r._)([(0,h.MZ)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Ee.prototype,"definitionExpression",void 0),(0,r._)([(0,h.MZ)({type:he,json:{name:"layerDefinition.polygonFilter",write:{enabled:!0,allowNull:!0},origins:{service:{read:!1,write:!1}}}})],Ee.prototype,"filter",void 0),(0,r._)([(0,h.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ee.prototype,"path",void 0),(0,r._)([(0,h.MZ)(H.Yj)],Ee.prototype,"elevationInfo",null),(0,r._)([(0,h.MZ)({readOnly:!0,json:{read:!1}})],Ee.prototype,"effectiveCapabilities",null),(0,r._)([(0,h.MZ)({readOnly:!0})],Ee.prototype,"effectiveEditingEnabled",null),(0,r._)([(0,h.MZ)({type:String})],Ee.prototype,"geometryType",null),(0,r._)([(0,h.MZ)(H.kF)],Ee.prototype,"labelsVisible",void 0),(0,r._)([(0,h.MZ)({type:[$.A],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:{reader:Y.w},write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:Y.w},write:!0}})],Ee.prototype,"labelingInfo",void 0),(0,r._)([(0,h.MZ)(H.fV)],Ee.prototype,"legendEnabled",void 0),(0,r._)([(0,h.MZ)({type:Number,json:{origins:{"web-document":{default:1,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}},read:{source:["opacity","layerDefinition.drawingInfo.transparency"],reader(e,t){var i;if("number"==typeof e&&e>=0&&e<=1)return e;const r=null===(i=t.layerDefinition)||void 0===i||null===(i=i.drawingInfo)||void 0===i?void 0:i.transparency;return void 0!==r?(0,Se.D)(r):void 0}}},"portal-item":{write:!0},service:{read:!1}}}})],Ee.prototype,"opacity",void 0),(0,r._)([(0,h.MZ)({type:["Low","High"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Ee.prototype,"priority",void 0),(0,r._)([(0,h.MZ)({type:["Labels"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Ee.prototype,"semantic",void 0),(0,r._)([(0,h.MZ)({types:o.X,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],Ee.prototype,"renderer",null),(0,r._)([(0,h.MZ)({json:{read:!1}})],Ee.prototype,"cachedDrawingInfo",void 0),(0,r._)([(0,v.w)("service","cachedDrawingInfo")],Ee.prototype,"readCachedDrawingInfo",null),(0,r._)([(0,h.MZ)({readOnly:!0,json:{read:!1}})],Ee.prototype,"capabilities",null),(0,r._)([(0,h.MZ)({type:Boolean,json:{read:!1}})],Ee.prototype,"editingEnabled",null),(0,r._)([(0,h.MZ)({readOnly:!0,json:{write:!1,read:!1}})],Ee.prototype,"infoFor3D",null),(0,r._)([(0,h.MZ)({readOnly:!0,json:{write:!1,read:!1}})],Ee.prototype,"relationships",null),(0,r._)([(0,h.MZ)(H.M6)],Ee.prototype,"popupEnabled",void 0),(0,r._)([(0,h.MZ)({type:n.A,json:{name:"popupInfo",write:!0}})],Ee.prototype,"popupTemplate",void 0),(0,r._)([(0,h.MZ)({readOnly:!0,json:{read:!1}})],Ee.prototype,"defaultPopupTemplate",null),(0,r._)([(0,h.MZ)({type:String,json:{read:!1}})],Ee.prototype,"objectIdField",void 0),(0,r._)([(0,v.w)("service","objectIdField",["objectIdField","fields"])],Ee.prototype,"readObjectIdField",null),(0,r._)([(0,h.MZ)({type:String,json:{read:!1}})],Ee.prototype,"globalIdField",void 0),(0,r._)([(0,v.w)("service","globalIdField",["globalIdField","fields"])],Ee.prototype,"readGlobalIdField",null),(0,r._)([(0,h.MZ)({readOnly:!0,type:String,json:{read:!1}})],Ee.prototype,"displayField",null),(0,r._)([(0,h.MZ)({type:String,json:{read:!1}})],Ee.prototype,"profile",void 0),(0,r._)([(0,v.w)("service","profile",["store.profile"])],Ee.prototype,"readProfile",null),(0,r._)([(0,h.MZ)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],Ee.prototype,"normalReferenceFrame",void 0),(0,r._)([(0,h.MZ)(H.PY)],Ee.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,h.MZ)({json:{read:!1,origins:{service:{read:!0}}}})],Ee.prototype,"serviceItemId",void 0),(0,r._)([(0,h.MZ)(j.B)],Ee.prototype,"useViewTime",null),Ee=(0,r._)([(0,m.$)("esri.layers.SceneLayer")],Ee);const Te={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",polygons:"polygons","features-polygons":"polygons"},xe={"mesh-pyramids":"mesh",points:"point"},je=Ee},45652:(e,t,i)=>{i.d(t,{$1:()=>d,H2:()=>y,MT:()=>h,VP:()=>f,WF:()=>u,Wt:()=>o,XQ:()=>v,hK:()=>p,nS:()=>c,uh:()=>a,xY:()=>l});var r=i(50076);const s="upload-assets",n=()=>new Error;class o extends r.A{constructor(){super("".concat(s,":unsupported"),"Layer does not support asset uploads.",n())}}class a extends r.A{constructor(){super("".concat(s,":no-glb-support"),"Layer does not support glb.",n())}}class l extends r.A{constructor(){super("".concat(s,":no-supported-source"),"No supported external source found",n())}}class d extends r.A{constructor(){super("".concat(s,":not-base-64"),"Expected gltf data in base64 format after conversion.",n())}}class u extends r.A{constructor(){super("".concat(s,":unable-to-prepare-options"),"Unable to prepare uploadAsset request options.",n())}}class c extends r.A{constructor(e,t){super("".concat(s,":bad-response"),"Bad response. Uploaded ".concat(e," items and received ").concat(t," results."),n())}}class p extends r.A{constructor(e,t){var i,r;super("".concat(s,"-layer:upload-failed"),"Failed to upload mesh file ".concat(e,". Error code: ").concat(null!==(i=null===t||void 0===t?void 0:t.code)&&void 0!==i?i:"-1",". Error message: ").concat(null!==(r=null===t||void 0===t?void 0:t.messages)&&void 0!==r?r:"unknown"),n())}}class y extends r.A{constructor(e){super("".concat(s,"-layer:unsupported-format"),"The service allowed us to upload an asset of FormatID ".concat(e,", but it does not list it in its supported formats."),n())}}class h extends r.A{constructor(){super("".concat(s,":convert3D-failed"),"convert3D failed.")}}class f extends r.A{constructor(){super("invalid-input:no-model","No supported model found")}}class v extends r.A{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}},31362:(e,t,i)=>{i.d(t,{d:()=>o});var r=i(35143),s=i(46053),n=(i(81806),i(76460),i(47249),i(85842));const o=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,r._)([(0,s.MZ)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,r._)([(0,n.$)("esri.layers.mixins.CustomParametersMixin")],t),t}},61979:(e,t,i)=>{i.d(t,{Mk:()=>y,Zk:()=>c,w6:()=>v});var r=i(35143),s=i(54099),n=i(53084),o=i(50346),a=i(46053),l=(i(81806),i(76460),i(85842)),d=i(35298);const u=new s.A.EventEmitter;function c(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=(0,o.Tw)();return r=null==t||r,u.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:s.promise}),s}const p=Symbol();function y(e){return null!=e&&"object"==typeof e&&p in e}function h(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function f(e,t,i){const r=new URL(e).host,s=d.Z3.get(r),n=e=>!e||e===s;return n(t)&&n(i)||t===i}const v=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0,this._applyEditsHandler=e=>{const{serviceUrl:t,layerId:i,gdbVersion:r,mayReceiveServiceEdits:s,result:o}=e,a=t===this.url,l=null!=i&&null!=this.layerId&&i===this.layerId,d=h(this),u=h(this)&&f(t,r,this.gdbVersion);if(!a||d&&!u||!l&&!s)return;const c=o.then((e=>{var i;if(this.lastEditsEventDate=new Date,l&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,n.o8)(e)),e;const s=null===(i=e.editedFeatures)||void 0===i?void 0:i.find((e=>{let{layerId:t}=e;return t===this.layerId}));if(s){const{adds:t,updates:i,deletes:r}=s.editedFeatures,o={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:t?t.map((e=>{let{attributes:t}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],deletedFeatures:r?r.map((e=>{let{attributes:t}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],updatedFeatures:i?i.map((e=>{let{current:{attributes:t}}=e;return{objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}})):[],editedFeatures:(0,n.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,n.o8)(e.historicMoment)};return this.emit("edits",o),o}const o={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,n.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,n.o8)(e.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(t,r,o.historicMoment)&&this.emit("edits",o),o})).then((e=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(t,r,e.historicMoment)&&(this.historicMoment=e.historicMoment),e)));this.emit("apply-edits",{result:c})},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:i,moment:r}=e,s=t===this.url,n=h(this),o=h(this)&&f(t,i,this.gdbVersion),a=h(this)&&!f(t,this.gdbVersion,null);s&&n&&o&&a&&"historicMoment"in this&&this.historicMoment!==r&&(this.historicMoment=r)},this.when().then((()=>{var e;this.addHandles((e=this._applyEditsHandler,u.on("apply-edits",new WeakRef(e)))),"historicMoment"in this&&this.addHandles(function(e){return u.on("update-moment",new WeakRef(e))}(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(e,t,i){return"historicMoment"in this&&this.historicMoment!==i&&(0,d.w5)(e,t)}};return t=p,(0,r._)([(0,a.MZ)()],i.prototype,"lastEditsEventDate",void 0),i=(0,r._)([(0,l.$)("esri.layers.mixins.EditBusLayer")],i),i}},94729:(e,t,i)=>{i.d(t,{A:()=>_});var r=i(35143),s=i(86560),n=i(55171),o=i(3825),a=i(98773),l=i(50076),d=i(76460),u=i(30726),c=i(50346),p=i(90534),y=i(46053),h=(i(81806),i(47249),i(28379)),f=i(85842),v=i(17707),m=i(31933),g=i(65308),w=i(70652),I=i(38665),b=i(72945);const _=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,u.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new w.default({id:t.itemId,portal:null===i||void 0===i?void 0:i.portal})}writePortalItem(e,t){(null===e||void 0===e?void 0:e.id)&&(t.itemId=e.id)}async loadFromPortal(e,t){var r;if(null!==(r=this.portalItem)&&void 0!==r&&r.id)try{const{load:r}=await Promise.all([i.e(2487),i.e(3814)]).then(i.bind(i,73814));return(0,c.Te)(t),await r({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(s){throw(0,c.zf)(s)||d.A.getLogger(this).warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(s)),s}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,c.QP)(e),!0))))}async setUserPrivileges(e,t){if(!s.A.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:i,fullEdit:r},content:{updateItem:s}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",r),this._set("userHasUpdateItemPrivileges",s)}catch(i){(0,c.QP)(i)}}async _fetchUserPrivileges(e,t){let i=this.portalItem;if(!e||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(t);const r=e===i.id;if(r&&i.portal.user)return(0,b.It)(i);let s,o;if(r)s=i.portal.url;else try{s=await(0,m.wI)(this.url,t)}catch(u){(0,c.QP)(u)}if(!s||!(0,p.b8)(s,i.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;o=await(null===n.id||void 0===n.id?void 0:n.id.getCredential("".concat(s,"/sharing"),{prompt:!1,signal:e}))}catch(u){(0,c.QP)(u)}const a=!0,l=!1,d=!1;if(!o)return{features:{edit:a,fullEdit:l},content:{updateItem:d}};try{if(r?await i.reload():(i=new w.default({id:e,portal:{url:s}}),await i.load(t)),i.portal.user)return(0,b.It)(i)}catch(u){(0,c.QP)(u)}return{features:{edit:a,fullEdit:l},content:{updateItem:d}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(i){(0,c.QP)(i)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?null===n.id||void 0===n.id?void 0:n.id.findCredential(this.url):null;if(!t)return!0;const i=A.credential===t?A.user:await this._fetchEditingUser(e);return A.credential=t,A.user=i,null==(null===i||void 0===i?void 0:i.privileges)||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){var t,i;const r=null===(t=this.portalItem)||void 0===t||null===(t=t.portal)||void 0===t?void 0:t.user;if(r)return r;const s=null===n.id||void 0===n.id?void 0:n.id.findServerInfo(null!==(i=this.url)&&void 0!==i?i:"");if(null===s||void 0===s||!s.owningSystemUrl)return null;const l="".concat(s.owningSystemUrl,"/sharing/rest"),d=g.A.getDefault();if(d&&d.loaded&&(0,p.S8)(d.restUrl)===(0,p.S8)(l))return d.user;const u="".concat(l,"/community/self"),c=null!=e?e.signal:null,y=await(0,a.Ke)((0,o.A)(u,{authMode:"no-prompt",query:{f:"json"},signal:c}));return y.ok?I.A.fromJSON(y.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){var i;const r=null===t||void 0===t?void 0:t.portal,s=(null===(i=this.portalItem)||void 0===i?void 0:i.id)&&(this.portalItem.portal||g.A.getDefault());return r&&s&&!(0,p.ut)(s.restUrl,r.restUrl)?(t.messages&&t.messages.push(new l.A("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer"),{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,r._)([(0,y.MZ)({type:w.default})],t.prototype,"portalItem",null),(0,r._)([(0,h.w)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,r._)([(0,v.K)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,r._)([(0,y.MZ)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,r._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,r._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,r._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,r._)([(0,f.$)("esri.layers.mixins.PortalLayer")],t),t},A={credential:null,user:null}},78817:(e,t,i)=>{i.d(t,{B:()=>y,e:()=>h});var r=i(35143),s=i(82111),n=i(53666),o=i(46053),a=(i(81806),i(76460),i(47249),i(28379)),l=i(85842),d=i(80979),u=i(53430),c=i(83982),p=i(90115);const y={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:d.K}}},h=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const i=t.timeInfo.exportOptions;if(!i)return null;const r=i.timeOffset,s=p.j.fromJSON(i.timeOffsetUnits);return r&&s?new n.A({value:r,unit:s}):null}set timeInfo(e){(0,u.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,r._)([(0,o.MZ)({type:s.A,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,r._)([(0,o.MZ)({type:n.A})],t.prototype,"timeOffset",void 0),(0,r._)([(0,a.w)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,r._)([(0,o.MZ)({value:null,type:c.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,r._)([(0,o.MZ)(y)],t.prototype,"useViewTime",void 0),t=(0,r._)([(0,l.$)("esri.layers.mixins.TemporalLayer")],t),t}},80524:(e,t,i)=>{i.d(t,{c:()=>a});var r=i(35143),s=i(42553),n=i(46053),o=(i(81806),i(76460),i(47249),i(85842));let a=class extends s.oY{constructor(){super(...arguments),this.type=null}};(0,r._)([(0,n.MZ)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,r._)([(0,o.$)("esri.layers.support.FeatureReduction")],a)},89672:(e,t,i)=>{i.d(t,{A:()=>d});var r,s=i(35143),n=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),a=i(80524);let l=r=class extends a.c{constructor(e){super(e),this.type="selection"}clone(){return new r}};(0,s._)([(0,n.MZ)({type:["selection"]})],l.prototype,"type",void 0),l=r=(0,s._)([(0,o.$)("esri.layers.support.FeatureReductionSelection")],l);const d=l},83982:(e,t,i)=>{i.d(t,{A:()=>f});var r=i(35143),s=i(82111),n=i(53666),o=i(69098),a=i(42553),l=i(46053),d=(i(81806),i(76460),i(47249),i(28379)),u=i(85842),c=i(17707),p=i(67478);function y(e,t){return n.A.fromJSON({value:e,unit:t})}let h=class extends((0,o.O)(a.oY)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?s.A.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=(null===e||void 0===e?void 0:e.start)&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?y(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?y(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){var i,r;t.timeInterval=null!==(i=null===e||void 0===e?void 0:e.toJSON().value)&&void 0!==i?i:null,t.timeIntervalUnits=null!==(r=null===e||void 0===e?void 0:e.toJSON().unit)&&void 0!==r?r:null}};(0,r._)([(0,l.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],h.prototype,"cumulative",void 0),(0,r._)([(0,l.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],h.prototype,"endField",void 0),(0,r._)([(0,l.MZ)({type:s.A,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"fullTimeExtent",void 0),(0,r._)([(0,d.w)("fullTimeExtent",["timeExtent"])],h.prototype,"readFullTimeExtent",null),(0,r._)([(0,c.K)("fullTimeExtent")],h.prototype,"writeFullTimeExtent",null),(0,r._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],h.prototype,"hasLiveData",void 0),(0,r._)([(0,l.MZ)({type:n.A,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"interval",void 0),(0,r._)([(0,d.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],h.prototype,"readInterval",null),(0,r._)([(0,c.K)("interval")],h.prototype,"writeInterval",null),(0,r._)([(0,l.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],h.prototype,"startField",void 0),(0,r._)([(0,l.MZ)((0,p.P6)("timeReference",!0))],h.prototype,"timeZone",void 0),(0,r._)([(0,l.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"trackIdField",void 0),(0,r._)([(0,l.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],h.prototype,"useTime",void 0),(0,r._)([(0,l.MZ)({type:[Date],json:{read:!1}})],h.prototype,"stops",void 0),h=(0,r._)([(0,u.$)("esri.layers.support.TimeInfo")],h);const f=h},76350:(e,t,i)=>{i.d(t,{p:()=>l});var r=i(81806),s=i(76460),n=i(44135),o=i(1900),a=i(53430);function l(){return{fields:{type:[n.A],value:null,set:function(e){if(e&&(0,r.A)("big-integer-warning-enabled")){const r=e.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(r.length){var t,i;const e=r.map((e=>"'".concat(e.name,"'"))).join(", ");s.A.getLogger(this).warn("#fields","Layer (title: '".concat(null!==(t=this.title)&&void 0!==t?t:"no title","', id: '").concat(null!==(i=this.id)&&void 0!==i?i:"no id","') references big-integer field(s): ").concat(e,", support for which is experimental. Only integers less than ").concat(Number.MAX_SAFE_INTEGER," (Number.MAX_SAFE_INTEGER) are supported."))}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return o.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(null===e||void 0===e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e){var t;(null===(t=this.fieldsIndex)||void 0===t?void 0:t.has(i))||s.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field","Invalid field ".concat(i," found in outFields"),{layer:this,outFields:e})}return(0,a.DB)(this.fieldsIndex,e)}}}}},19463:(e,t,i)=>{i.d(t,{E1:()=>a,Fm:()=>l,JZ:()=>f,R_:()=>o,fu:()=>s,oF:()=>n,rq:()=>d});const r=[["binary","application/octet-stream","bin",""]];function s(e,t){var i;return null!=c(t.name,null!==(i=null===e||void 0===e?void 0:e.supportedFormats)&&void 0!==i?i:[])}function n(e,t){var i;if(!e)return!1;const r=d(t,null!==(i=e.supportedFormats)&&void 0!==i?i:[]);return null!=r&&e.editFormats.includes(r)}function o(e,t){return p(function(e,t){const i=e.toLowerCase();return u(t).find((e=>y(e)===i))}(e,t))}function a(e,t){return p(c(e,t))}function l(e,t){return y(function(e,t){return u(t).find((t=>p(t)===e))}(e,t))}function d(e,t){var i;return null!==(i=a(e.name,t))&&void 0!==i?i:o(e.type,t)}function u(e){return[...r,...e]}function c(e,t){const i=e.toLowerCase();return u(t).find((e=>h(e).some((e=>i.endsWith(e)))))}function p(e){return null===e||void 0===e?void 0:e[0]}function y(e){return null===e||void 0===e?void 0:e[1].toLowerCase()}function h(e){var t;return null!==(t=null===e||void 0===e?void 0:e[2].split(",").map((e=>e.toLowerCase())))&&void 0!==t?t:[]}function f(e){var t;return null===(t=e.tables)||void 0===t?void 0:t.find((e=>"assetMaps"===e.role))}},72945:(e,t,i)=>{i.d(t,{It:()=>p,LG:()=>o,OM:()=>d,Y:()=>a,bK:()=>l,mm:()=>c,sQ:()=>u});var r=i(26346),s=i(13312),n=i(45417);function o(e,t){if(!a(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function a(e,t){var i;return!(null===(i=e.typeKeywords)||void 0===i||!i.includes(t))}function l(e){return a(e,c.HOSTED_SERVICE)}function d(e,t){const i=e.typeKeywords;if(i){const e=i.indexOf(t);e>-1&&i.splice(e,1)}}async function u(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return async function(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,n.ci)(e);const i=s.A.WGS84;return await(0,r.initializeProjection)(t,i),(0,r.project)(e,i)}(i)}const c={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function p(e){var t;const{portal:i,isOrgItem:r,itemControl:s}=e,n=null===(t=i.user)||void 0===t?void 0:t.privileges;let o=!n||n.includes("features:user:edit"),a=!!r&&!(null===n||void 0===n||!n.includes("features:user:fullEdit"));const l="update"===s||"admin"===s;return l?a=o=!0:a&&(o=!0),{features:{edit:o,fullEdit:a},content:{updateItem:l}}}},95474:(e,t,i)=>{i.d(t,{n:()=>s});var r=i(90534);function s(e){return n[function(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function(e){const t=(0,r.Zo)(e);return l[t]||o}(e.url)}(e)]||a}const n={},o="text/plain",a=n[o],l={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const d in l)n[l[d]]=d},90115:(e,t,i)=>{i.d(t,{j:()=>r});const r=(0,i(45802).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},81589:(e,t,i)=>{i.d(t,{L:()=>o});var r=i(98773),s=i(50346),n=i(62754);async function o(e,t,i){const o=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(o&&"unique-value"===o.type&&o.styleOrigin){const a=await(0,r.Ke)(o.populateFromStyle());if((0,s.Te)(i),!1===a.ok){const i=a.error;null!==t&&void 0!==t&&t.messages&&t.messages.push(new n.A("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(i.message),{error:i,context:t})),e.clear("renderer",null===t||void 0===t?void 0:t.origin)}}}},35298:(e,t,i)=>{i.d(t,{TA:()=>s,We:()=>a,Z3:()=>n,ZJ:()=>l,w5:()=>d});var r=i(3825);const s=(0,i(49723).vD)(),n=new Map,o=new Map;new Map;async function a(e,t,i){if(!e||!i)return!1;if(!t)return!0;const s=new URL(e).host;let o=n.get(s);if(!o){const t=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");o=(await(0,r.A)(t,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return o===t}async function l(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!t)return!0;const a=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),l=null===(r=o.get(a))||void 0===r?void 0:r.entries();if(l)for(const[o,c]of l)if(c.name===t){var d;const e=!(null!==(d=c.stack)&&void 0!==d&&d.hasForwardEdits());if(!e&&n){var u;const[{deleteForwardEdits:e},{default:t}]=await Promise.all([i.e(6868).then(i.bind(i,56868)),i.e(7028).then(i.bind(i,37028))]),r=await e(a,o,new t({sessionId:s,moment:c.moment}));return r.success&&null!==(u=c.stack)&&void 0!==u&&u.clearForwardEdits(),r.success}return e}return!0}function d(e,t){var i;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=null===(i=o.get(r))||void 0===i?void 0:i.entries();if(s)for(const[n,o]of s)if(o.name===t)return"edit"===o.lockType;return!1}}}]);
//# sourceMappingURL=8320.9d21dc86.chunk.js.map