"use strict";(self.webpackChunktyphoon=self.webpackChunktyphoon||[]).push([[8126,4920],{53521:(e,t,i)=>{i.d(t,{q:()=>n});var s=i(79369);class n{constructor(e,t){this._storage=new s.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},79369:(e,t,i)=>{i.d(t,{F:()=>r,Mn:()=>o});var s=i(30015);var n;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"}(n||(n={}));class o{constructor(e,t,i){this.name=e,this._storage=t,this.id=l+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,e,t,i,s)}pop(e){const t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){const t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t,i){this._storage.updateSize(this,e,t,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class r{get size(){return this._size}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new s.A,this._users=new s.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){var i;const s=this._db.get(e.id+t);return null!==(i=null===s||void 0===s?void 0:s.size)&&void 0!==i?i:0}put(e,t,i,s,o){t=e.id+t;const r=this._db.get(t);if(r&&(this._size-=r.size,e.size-=r.size,this._db.delete(t),r.entry!==i&&this._notifyRemove(t,r.entry,r.size,n.ALL)),s>this._maxSize)return void this._notifyRemove(t,i,s,n.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn("Refusing to cache entry with size ".concat(s," for key ").concat(t)),void this._notifyRemove(t,i,0,n.ALL);const l=1+Math.max(o,-4)- -3;this._db.set(t,new a(i,s,l)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,t,i,s){t=e.id+t;const o=this._db.get(t);if(o&&o.entry===i){for(this._size-=o.size,e.size-=o.size;s>this._maxSize;){const e=this._notifyRemove(t,i,s,n.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);s=e}o.size=s,this._size+=s,e.size+=s,this._checkSize()}}pop(e,t){t=e.id+t;const i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(e,t){t=e.id+t;const i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}peek(e,t){const i=this._db.get(e.id+t);return i?++this._hit:++this._miss,null===i||void 0===i?void 0:i.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,s)=>{const n=e.lifetime;i[n]=(i[n]||0)+e.size,this._users.forAll((i=>{const{id:n,name:o}=i;if(s.startsWith(n)){const i=t[o]||0;t[o]=i+e.size}}))}));const s={};this._users.forAll((e=>{const i=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const n=t[i]||0;t[i]=n,s[i]=Math.round(100*e.hitRate)+"%"}else s[i]="0%"}));const n=Object.keys(t);n.sort(((e,i)=>t[i]-t[e])),n.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+s[i]));for(let o=i.length-1;o>=0;--o){const t=i[o];t&&(e["Priority "+(o+-3-1)]=Math.round(t/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemove(i,e.entry,e.size,n.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,n.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i,s){let n;return this._removeFuncs.some((o=>{if(e.startsWith(o[0])){const e=o[1](t,s,i);return"number"==typeof e&&(n=e),!0}return!1})),n}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=null!==e&&void 0!==e?e:this;if(t.maxSize<0||t.size<=t.maxSize)return;const i=null===e||void 0===e?void 0:e.id;let s=!0;for(;s;){s=!1;for(const[n,o]of this._db)if(0===o.lifetime&&(!i||n.startsWith(i))){if(this._purgeItem(n,o,e),t.size<=.9*t.maxSize)return;s||(s=this._db.has(n))}}for(const[n,o]of this._db)if((!i||n.startsWith(i))&&(this._purgeItem(n,o,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((t=>e.startsWith(t.id)));if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);const s=this._notifyRemove(e,t.entry,t.size,n.SOME);null!=s&&s>0&&(this._size+=s,i&&(i.size+=s),t.lives=t.lifetime,t.size=s,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let l=0;class a{constructor(e,t,i){this.entry=e,this.size=t,this.lifetime=i,this.lives=i}}},15011:(e,t,i)=>{i.d(t,{EB:()=>h,Mj:()=>p,Ui:()=>v,w2:()=>f});var s=i(91967),n=i(94643),o=i(39314);const r=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function l(e){return e instanceof s.A}function a(e){return e instanceof n.A?Object.keys(e.items):l(e)?(0,o.oY)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof n.A?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function c(e,t){const i=e.diff;if(i&&"function"==typeof i)return i(e,t);const s=a(e),n=a(t);if(0===s.length&&0===n.length)return;if(!s.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=n.filter((e=>!s.includes(e))),p=s.filter((e=>!n.includes(e))),h=s.filter((i=>n.includes(i)&&u(e,i)!==u(t,i))).concat(o,p).sort(),f=d(e);if(f&&r.has(f)&&h.length)return{type:"complete",oldValue:e,newValue:t};let v;const y=l(e)&&l(t);for(const r of h){const s=u(e,r),n=u(t,r);let o;if((y||"function"!=typeof s&&"function"!=typeof n)&&s!==n&&(null!=s||null!=n)){var m;if(i&&i[r]&&"function"==typeof i[r])o=null===(m=i[r])||void 0===m?void 0:m.call(i,s,n);else if(s instanceof Date&&n instanceof Date){if(s.getTime()===n.getTime())continue;o={type:"complete",oldValue:s,newValue:n}}else o="object"==typeof s&&"object"==typeof n&&d(s)===d(n)?c(s,n):{type:"complete",oldValue:s,newValue:n};null!=o&&(null!=v?v.diff[r]=o:v={type:"partial",diff:{[r]:o}})}}return v}function p(e,t){return h(e,t)}function h(e,t){if(null==e)return!1;const i=t.split(".");let s=e;for(const n of i){if("complete"===s.type)return!0;if("partial"!==s.type)return!1;{const e=s.diff[n];if(!e)return!1;s=e}}return!0}function f(e,t){if(!e)return!1;if("partial"===e.type){const i=Object.keys(e.diff);return 1===i.length&&i[0]===t}return!1}function v(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)}},64920:(e,t,i)=>{i.d(t,{GB:()=>n,Qo:()=>r,Y4:()=>o});var s=i(24241);class n{}function o(e){return e instanceof s.bo?e===n.instance:"unknown"===(null===e||void 0===e?void 0:e.toString().toLowerCase())}function r(e){return o(e)?n.instance:e}n.instance=new s.oh("Etc/UTC")},76279:(e,t,i)=>{i.d(t,{$X:()=>w,Gy:()=>_,P5:()=>z,SW:()=>S,Tr:()=>x,VV:()=>s});i(19902);function s(e){var t,i;return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,null!==(t=e.extent.zmin)&&void 0!==t?t:0,null!==(i=e.extent.mmin)&&void 0!==i?i:0]:[0,0,0,0]}:null}function n(e){var t,i,s,n,o,r,l,a;if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:u,scale:d,translate:c}=e,p=null!==(t=d[0])&&void 0!==t?t:1,h=null!==(i=d[1])&&void 0!==i?i:1;return{originPosition:"lowerLeft",scale:[p,"lowerLeft"===u?h:-h,null!==(s=d[2])&&void 0!==s?s:1,null!==(n=d[3])&&void 0!==n?n:1],translate:[null!==(o=c[0])&&void 0!==o?o:0,null!==(r=c[1])&&void 0!==r?r:0,null!==(l=c[2])&&void 0!==l?l:0,null!==(a=c[3])&&void 0!==a?a:0]}}function o(e,t){let{scale:i,translate:s}=e;return Math.round((t-s[0])/i[0])}function r(e,t){let{scale:i,translate:s}=e;return Math.round((t-s[1])/i[1])}function l(e,t){let{scale:i,translate:s}=e;return Math.round(((null!==t&&void 0!==t?t:0)-s[2])/i[2])}function a(e,t){let{scale:i,translate:s}=e;return t?Math.round((t-s[3])/i[3]):0}function u(e,t){let{scale:i,translate:s}=e;return t*i[0]+s[0]}function d(e,t){let{scale:i,translate:s}=e;return t*i[1]+s[1]}function c(e,t){let{scale:i,translate:s}=e;return(null!==t&&void 0!==t?t:0)*i[2]+s[2]}function p(e,t){let{scale:i,translate:s}=e;return t?t*i[3]+s[3]:0}function h(e,t){return e&&t?m:e&&!t?v:!e&&t?y:f}const f=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const s=t[0];let n=u(e,s[0]),o=d(e,s[1]);i[0]=[n,o];const{scale:r,originPosition:l}=e,a=r[0],c="lowerLeft"===l?r[1]:-r[1];for(let u=1;u<t.length;u++){const[e,s]=t[u];n+=a*e,o+=c*s,i[u]=[n,o]}return i},v=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const s=t[0];let n=u(e,s[0]),o=d(e,s[1]);i[0]=[n,o,c(e,s[2])];const{scale:r,originPosition:l}=e,a=r[0],p="lowerLeft"===l?r[1]:-r[1];for(let u=1;u<t.length;u++){const[s,r,l]=t[u];n+=a*s,o+=p*r,i[u]=[n,o,c(e,l)]}return i},y=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const s=t[0];let n=u(e,s[0]),o=d(e,s[1]);i[0]=[n,o,p(e,s[2])];const{scale:r,originPosition:l}=e,a=r[0],c="lowerLeft"===l?r[1]:-r[1];for(let u=1;u<t.length;u++){const[s,r,l]=t[u];n+=a*s,o+=c*r,i[u]=[n,o,p(e,l)]}return i},m=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const s=t[0];let n=u(e,s[0]),o=d(e,s[1]);i[0]=[n,o,c(e,s[2]),p(e,s[3])];const{scale:r,originPosition:l}=e,a=r[0],h="lowerLeft"===l?r[1]:-r[1];for(let u=1;u<t.length;u++){const[s,r,l,d]=t[u];n+=a*s,o+=h*r,i[u]=[n,o,c(e,l),p(e,d)]}return i};function g(e,t,i){const s=new Array(i.length);for(let n=0;n<i.length;n++)s[n]=t(e,i[n]);return s}function _(e,t,i){const s=n(e);return t.x=o(s,i.x),t.y=r(s,i.y),null!=i.z&&(t.z=l(s,i.z)),null!=i.m&&(t.m=a(s,i.m)),t}function S(e,t,i){var s,o;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!==(s=null===i||void 0===i?void 0:i.hasZ)&&void 0!==s&&s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!==(o=null===i||void 0===i?void 0:i.hasM)&&void 0!==o&&o;if(null!=i){const s=n(e);t.points=h(r,l)(s,i.points),t.hasZ=r,t.hasM=l}return t}function x(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!=(null===i||void 0===i?void 0:i.z),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!=(null===i||void 0===i?void 0:i.m);if(null==i)return t;const r=n(e);return t.x=u(r,i.x),t.y=d(r,i.y),s&&(t.z=c(r,i.z)),o&&(t.m=p(r,i.m)),t}function w(e,t,i){var s,o;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!==(s=null===i||void 0===i?void 0:i.hasZ)&&void 0!==s&&s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!==(o=null===i||void 0===i?void 0:i.hasM)&&void 0!==o&&o;if(null!=i){const s=n(e);t.rings=g(s,h(r,l),i.rings),t.hasZ=r,t.hasM=l}return t}function z(e,t,i){var s,o;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null!==(s=null===i||void 0===i?void 0:i.hasZ)&&void 0!==s&&s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!==(o=null===i||void 0===i?void 0:i.hasM)&&void 0!==o&&o;if(null!=i){const s=n(e);t.paths=g(s,h(r,l),i.paths),t.hasZ=r,t.hasM=l}return t}},1900:(e,t,i)=>{i.d(t,{A:()=>p});var s=i(50076),n=i(42553),o=i(76460),r=i(87663),l=i(64920),a=i(53430),u=i(67478),d=i(24241);const c=new Map;class p{static fromJSON(e){return new p(e.fields,e.timeZoneByFieldName)}static fromLayer(e){var t;return new p(null!==(t=e.fields)&&void 0!==t?t:[],y(e))}static fromLayerJSON(e){var t;return new p(null!==(t=e.fields)&&void 0!==t?t:[],y(e))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const i=[];for(const n of this.fields){const e=null===n||void 0===n?void 0:n.name,t=f(e);if(e&&t){var s;const o=h(e);this._fieldsMap.set(e,n),this._fieldsMap.set(o,n),this._normalizedFieldsMap.set(t,n),i.push("".concat(o,":").concat(n.type,":").concat(null===(s=this._timeZoneByFieldName)||void 0===s?void 0:s.get(e))),(0,a.vE)(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):(0,a.WA)(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),(0,a.te)(n)||(0,a.Xz)(n)||(n.editable=null==n.editable||!!n.editable,n.nullable=null==n.nullable||!!n.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,a.te)(e)||(0,a.Xz)(e)||e.nullable||void 0!==(0,a.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===(null===e||void 0===e?void 0:e.uid)}has(e){return null!=this.get(e)}get(e){var t;if(!e)return;let i=this._fieldsMap.get(e);return i||(i=null!==(t=this._fieldsMap.get(h(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(f(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(o.A.getLogger("esri.layers.support.FieldsIndex").error(new s.A("getTimeZone:no-timezone-information","no time zone information for field '".concat(t.name,"'"))),u.n$):v.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?l.GB.instance:t===u.n$?d.mQ.utcInstance:(0,r.tE)(c,t,(()=>d.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,a.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){var t,i;return null!==(t=null===(i=this.get(e))||void 0===i?void 0:i.name)&&void 0!==t?t:void 0}toJSON(){return{fields:this.fields.map((e=>(0,n.Wj)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function h(e){return e.trim().toLowerCase()}function f(e){var t,i;return null!==(t=null===(i=(0,a.rS)(e))||void 0===i?void 0:i.toLowerCase())&&void 0!==t?t:""}const v=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function y(e){var t,i,s,n,o,r,l;const a=new Map;if(!e.fields)return a;const d=!0===e.datesInUnknownTimezone,{timeInfo:c,editFieldsInfo:p}=e,f=null!==(t=c?"startField"in c?c.startField:c.startTimeField:"")&&void 0!==t?t:"",y=null!==(i=c?"endField"in c?c.endField:c.endTimeField:"")&&void 0!==i?i:"",m=function(e){return"dateFieldsTimeZone"in e}(e)?null!==(s=e.dateFieldsTimeZone)&&void 0!==s?s:null:e.dateFieldsTimeReference?(0,u.ZS)(e.dateFieldsTimeReference):null,g=p?function(e){return"timeZone"in e}(p)?null!==(n=p.timeZone)&&void 0!==n?n:m:p.dateFieldsTimeReference?(0,u.ZS)(p.dateFieldsTimeReference):null!==m&&void 0!==m?m:u.n$:null,_=c?function(e){return"timeZone"in e}(c)?null!==(o=c.timeZone)&&void 0!==o?o:m:c.timeReference?(0,u.ZS)(c.timeReference):m:null,S=new Map([[h(null!==(r=null===p||void 0===p?void 0:p.creationDateField)&&void 0!==r?r:""),g],[h(null!==(l=null===p||void 0===p?void 0:p.editDateField)&&void 0!==l?l:""),g],[h(f),_],[h(y),_]]);for(const{name:w,type:z}of e.fields)if(v.has(z))a.set(w,u.L5);else if("date"!==z&&"esriFieldTypeDate"!==z)a.set(w,null);else if(d)a.set(w,u.L5);else{var x;const e=null!==(x=S.get(h(null!==w&&void 0!==w?w:"")))&&void 0!==x?x:m;a.set(w,e)}return a}},2395:(e,t,i)=>{i.d(t,{L0:()=>m,Ot:()=>h,W4:()=>a,uV:()=>c});var s=i(35143),n=i(42553),o=i(46053),r=(i(81806),i(76460),i(47249),i(6409)),l=i(85842);let a=class extends n.oY{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};(0,s._)([(0,o.MZ)({type:Number})],a.prototype,"nodesPerPage",void 0),(0,s._)([(0,o.MZ)({type:Number})],a.prototype,"rootIndex",void 0),(0,s._)([(0,o.MZ)({type:String})],a.prototype,"lodSelectionMetricType",void 0),a=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3SNodePageDefinition")],a);let u=class extends n.oY{constructor(){super(...arguments),this.factor=1}};(0,s._)([(0,o.MZ)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],u.prototype,"id",void 0),(0,s._)([(0,o.MZ)({type:Number})],u.prototype,"factor",void 0),u=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3SMaterialTexture")],u);let d=class extends n.oY{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};(0,s._)([(0,o.MZ)({type:[Number]})],d.prototype,"baseColorFactor",void 0),(0,s._)([(0,o.MZ)({type:u})],d.prototype,"baseColorTexture",void 0),(0,s._)([(0,o.MZ)({type:u})],d.prototype,"metallicRoughnessTexture",void 0),(0,s._)([(0,o.MZ)({type:Number})],d.prototype,"metallicFactor",void 0),(0,s._)([(0,o.MZ)({type:Number})],d.prototype,"roughnessFactor",void 0),d=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3SMaterialPBRMetallicRoughness")],d);let c=class extends n.oY{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};(0,s._)([(0,r.e)({opaque:"opaque",mask:"mask",blend:"blend"})],c.prototype,"alphaMode",void 0),(0,s._)([(0,o.MZ)({type:Number})],c.prototype,"alphaCutoff",void 0),(0,s._)([(0,o.MZ)({type:Boolean})],c.prototype,"doubleSided",void 0),(0,s._)([(0,r.e)({none:"none",back:"back",front:"front"})],c.prototype,"cullFace",void 0),(0,s._)([(0,o.MZ)({type:u})],c.prototype,"normalTexture",void 0),(0,s._)([(0,o.MZ)({type:u})],c.prototype,"occlusionTexture",void 0),(0,s._)([(0,o.MZ)({type:u})],c.prototype,"emissiveTexture",void 0),(0,s._)([(0,o.MZ)({type:[Number]})],c.prototype,"emissiveFactor",void 0),(0,s._)([(0,o.MZ)({type:d})],c.prototype,"pbrMetallicRoughness",void 0),c=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3SMaterialDefinition")],c);let p=class extends n.oY{};(0,s._)([(0,o.MZ)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:"".concat(t.index)}}})],p.prototype,"name",void 0),(0,s._)([(0,r.e)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",ktx2:"ktx2",basis:"basis"})],p.prototype,"format",void 0),p=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3STextureFormat")],p);let h=class extends n.oY{constructor(){super(...arguments),this.atlas=!1}};(0,s._)([(0,o.MZ)({type:[p]})],h.prototype,"formats",void 0),(0,s._)([(0,o.MZ)({type:Boolean})],h.prototype,"atlas",void 0),h=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3STextureSetDefinition")],h);let f=class extends n.oY{};(0,s._)([(0,r.e)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],f.prototype,"type",void 0),(0,s._)([(0,o.MZ)({type:Number})],f.prototype,"component",void 0),f=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3SGeometryAttribute")],f);let v=class extends n.oY{};(0,s._)([(0,r.e)({draco:"draco"})],v.prototype,"encoding",void 0),(0,s._)([(0,o.MZ)({type:[String]})],v.prototype,"attributes",void 0),v=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3SGeometryCompressedAttributes")],v);let y=class extends n.oY{constructor(){super(...arguments),this.offset=0}};(0,s._)([(0,o.MZ)({type:Number})],y.prototype,"offset",void 0),(0,s._)([(0,o.MZ)({type:f})],y.prototype,"position",void 0),(0,s._)([(0,o.MZ)({type:f})],y.prototype,"normal",void 0),(0,s._)([(0,o.MZ)({type:f})],y.prototype,"uv0",void 0),(0,s._)([(0,o.MZ)({type:f})],y.prototype,"color",void 0),(0,s._)([(0,o.MZ)({type:f})],y.prototype,"uvRegion",void 0),(0,s._)([(0,o.MZ)({type:f})],y.prototype,"featureId",void 0),(0,s._)([(0,o.MZ)({type:f})],y.prototype,"faceRange",void 0),(0,s._)([(0,o.MZ)({type:v})],y.prototype,"compressedAttributes",void 0),y=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3SGeometryBuffer")],y);let m=class extends n.oY{};(0,s._)([(0,r.e)({triangle:"triangle"})],m.prototype,"topology",void 0),(0,s._)([(0,o.MZ)()],m.prototype,"geometryBuffers",void 0),m=(0,s._)([(0,l.$)("esri.layers.support.I3SLayerDefinitions.I3SGeometryDefinition")],m)},5618:(e,t,i)=>{i.d(t,{A:()=>d});var s,n=i(35143),o=i(94643),r=i(42553),l=i(46053),a=(i(81806),i(76460),i(47249),i(85842));let u=s=class extends r.oY{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new o.A}clone(){return new s({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],u.prototype,"floorField",void 0),(0,n._)([(0,l.MZ)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,n._)([(0,l.MZ)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=s=(0,n._)([(0,a.$)("esri.layers.support.LayerFloorInfo")],u);const d=u},39323:(e,t,i)=>{i.d(t,{L:()=>d});var s=i(55171),n=i(3825),o=i(50076),r=i(50346),l=i(13096),a=i(65308),u=i(70652);async function d(e,t){var i,d;const h=(0,l.qg)(e);if(!h)throw new o.A("invalid-url","Invalid scene service url");const f={...t,sceneServerUrl:h.url.path,layerId:null!==(i=h.sublayer)&&void 0!==i?i:void 0};if(null!==(d=f.sceneLayerItem)&&void 0!==d||(f.sceneLayerItem=await async function(e){const t=(await c(e)).serviceItemId;if(!t)return null;const i=new u.default({id:t,apiKey:e.apiKey}),o=await async function(e){const t=null===s.id||void 0===s.id?void 0:s.id.findServerInfo(e.sceneServerUrl);if(null!==t&&void 0!==t&&t.owningSystemUrl)return t.owningSystemUrl;const i=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const t=(await(0,n.A)(i,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(t)return t}catch(v){(0,r.QP)(v)}return null}(e);null!=o&&(i.portal=new a.A({url:o}));try{return i.load({signal:e.signal})}catch(y){return(0,r.QP)(y),null}}(f)),null==f.sceneLayerItem)return p(f.sceneServerUrl.replace("/SceneServer","/FeatureServer"),f);const v=await async function(e){let{sceneLayerItem:t,signal:i}=e;if(!t)return null;try{const e=(await t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:i})).find((e=>"Feature Service"===e.type))||null;if(!e)return null;const s=new u.default({portal:e.portal,id:e.id});return await s.load(),s}catch(s){return(0,r.QP)(s),null}}(f);if(null===v||void 0===v||!v.url)throw new o.A("related-service-not-found","Could not find feature service through portal item relationship");f.featureServiceItem=v;const y=await p(v.url,f);return y.portalItem=v,y}async function c(e){if(e.rootDocument)return e.rootDocument;const t={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{const i=await(0,n.A)(e.sceneServerUrl,t);e.rootDocument=i.data}catch{e.rootDocument={}}return e.rootDocument}async function p(e,t){var i,s,r;const a=(0,l.qg)(e);if(!a)throw new o.A("invalid-feature-service-url","Invalid feature service url");const u=a.url.path,d=t.layerId;if(null==d)return{serverUrl:u};const p=c(t),h=t.featureServiceItem?await t.featureServiceItem.fetchData("json"):null,f=null===(i=(null===h||void 0===h||null===(s=h.layers)||void 0===s?void 0:s[0])||(null===h||void 0===h||null===(r=h.tables)||void 0===r?void 0:r[0]))||void 0===i?void 0:i.customParameters,v=e=>{const i={query:{f:"json",...f},responseType:"json",authMode:e,signal:t.signal};return(0,n.A)(u,i)},y=v("anonymous").catch((()=>v("no-prompt"))),[m,g]=await Promise.all([y,p]),_=null===g||void 0===g?void 0:g.layers,S=m.data&&m.data.layers;if(!Array.isArray(S))throw new Error("expected layers array");if(Array.isArray(_)){for(let n=0;n<Math.min(_.length,S.length);n++)if(_[n].id===d)return{serverUrl:u,layerId:S[n].id}}else if(null!=d&&d<S.length)return{serverUrl:u,layerId:S[d].id};throw new Error("could not find matching associated sublayer")}},16981:(e,t,i)=>{i.d(t,{P:()=>s});const s={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},65460:(e,t,i)=>{i.d(t,{BI:()=>y,D3:()=>f,XJ:()=>v,lc:()=>h,mX:()=>g,rU:()=>m,tH:()=>z});var s=i(88685);const n="__begin__",o="__end__",r=new RegExp(n,"ig"),l=new RegExp(o,"ig"),a=new RegExp("^"+n,"i"),u=new RegExp(o+"$","i"),d='"',c=d+" + ",p=" + "+d;function h(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function f(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function v(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=h(e.labelExpression),t.type="conventional"),t}function y(e){const t=v(e);if(!t)return null;switch(t.type){case"conventional":return g(t.expression);case"arcade":return t.expression}return null}function m(e){const t=v(e);if(!t)return null;switch(t.type){case"conventional":return function(e){const t=null===e||void 0===e?void 0:e.match(_);return(null===t||void 0===t?void 0:t[1].trim())||null}(t.expression);case"arcade":return z(t.expression)}return null}function g(e){let t;return e?(t=(0,s.HC)(e,(e=>n+'$feature["'+e+'"]'+o)),t=a.test(t)?t.replace(a,""):d+t,t=u.test(t)?t.replace(u,""):t+d,t=t.replaceAll(r,c).replaceAll(l,p)):t='""',t}const _=/^\s*\{([^}]+)\}\s*$/i;const S=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,x=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,w=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function z(e){if(!e)return null;let t=S.exec(e)||x.exec(e);return t?t[1]||t[3]:(t=w.exec(e),t?t[2]:null)}},4414:(e,t,i)=>{i.d(t,{O3:()=>c,PU:()=>u,YW:()=>h,ex:()=>l,hv:()=>p,zp:()=>a});var s=i(15941),n=i(76931),o=i(43047),r=i(55855);const l=2.4;function a(e){return(0,n.PN)(e*l)}function u(e){return(0,n.Lz)(e)/l}function d(e,t,i,n){let{color:r,ratio:l}=t,{color:a,ratio:u}=i;if(u===l){const e=1e-6;1===u?l-=e:u+=e}const d=(0,s.qE)((n-l)/(u-l),0,1);(0,o.l)(e,r.toArray(),a.toArray(),d)}function c(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((e=>{let{ratio:t}=e;return t>=0&&t<=1})).sort(((e,t)=>e.ratio-t.ratio)).map((e=>{let{color:t,ratio:i}=e;return{color:t,ratio:Math.max(i,.001)}})),e.length<1)return t;let i=e[0],s=e[0],n=1;const o=(0,r.vt)();for(let r=0;r<512;r++){const l=(r+.5)/512;for(;l>s.ratio&&n<e.length;)i=s,s=e[n++];d(o,i,s,l),t.set(o,4*r)}return t}function p(e,t,i){const s=Math.sqrt(e**2+t**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function h(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},12482:(e,t,i)=>{i.d(t,{$7:()=>l,B:()=>r,M7:()=>d,XF:()=>u,tW:()=>a,w7:()=>o});i(31633);var s=i(59097);function n(e){return e?c:p}function o(e,t){return function(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:n(e).mode}(null!=e&&e.hasZ,t)}function r(e,t,i){return i&&i.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function l(e,t,i){return(null===i||void 0===i?void 0:i.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function a(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function u(e,t){t&&e.warn(".elevationInfo=",t)}function d(e){var t;return(null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t?t:0)*(0,s.Ao)(null===e||void 0===e?void 0:e.unit)}const c={mode:"absolute-height",offset:0},p={mode:"on-the-ground",offset:null}},2257:(e,t,i)=>{i.d(t,{D8:()=>o,TO:()=>n});var s=i(53430);async function n(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.popupTemplate;if(null==n)return[];const o=await n.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:r}=n,{objectIdField:l,typeIdField:a,globalIdField:u,relationships:d}=e;if(o.includes("*"))return["*"];const c=r?(0,s.eX)(e):[],p=(0,s.DB)(e.fieldsIndex,[...o,...c]);return a&&p.push(a),p&&l&&null!==(t=e.fieldsIndex)&&void 0!==t&&t.has(l)&&!p.includes(l)&&p.push(l),p&&u&&null!==(i=e.fieldsIndex)&&void 0!==i&&i.has(u)&&!p.includes(u)&&p.push(u),d&&d.forEach((t=>{var i;const{keyField:s}=t;p&&s&&(null===(i=e.fieldsIndex)||void 0===i?void 0:i.has(s))&&!p.includes(s)&&p.push(s)})),p}function o(e,t){return e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}}}]);
//# sourceMappingURL=8126.a03b475f.chunk.js.map