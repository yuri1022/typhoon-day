"use strict";(self.webpackChunktyphoon=self.webpackChunktyphoon||[]).push([[8333],{15011:(e,t,n)=>{n.d(t,{EB:()=>p,Mj:()=>y,Ui:()=>h,w2:()=>d});var o=n(91967),r=n(94643),l=n(39314);const i=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function s(e){return e instanceof o.A}function a(e){return e instanceof r.A?Object.keys(e.items):s(e)?(0,l.oY)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof r.A?e.items[t]:e[t]}function u(e){return e?e.declaredClass:null}function f(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const o=a(e),r=a(t);if(0===o.length&&0===r.length)return;if(!o.length||!r.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const l=r.filter((e=>!o.includes(e))),y=o.filter((e=>!r.includes(e))),p=o.filter((n=>r.includes(n)&&c(e,n)!==c(t,n))).concat(l,y).sort(),d=u(e);if(d&&i.has(d)&&p.length)return{type:"complete",oldValue:e,newValue:t};let h;const m=s(e)&&s(t);for(const i of p){const o=c(e,i),r=c(t,i);let l;if((m||"function"!=typeof o&&"function"!=typeof r)&&o!==r&&(null!=o||null!=r)){var g;if(n&&n[i]&&"function"==typeof n[i])l=null===(g=n[i])||void 0===g?void 0:g.call(n,o,r);else if(o instanceof Date&&r instanceof Date){if(o.getTime()===r.getTime())continue;l={type:"complete",oldValue:o,newValue:r}}else l="object"==typeof o&&"object"==typeof r&&u(o)===u(r)?f(o,r):{type:"complete",oldValue:o,newValue:r};null!=l&&(null!=h?h.diff[i]=l:h={type:"partial",diff:{[i]:l}})}}return h}function y(e,t){return p(e,t)}function p(e,t){if(null==e)return!1;const n=t.split(".");let o=e;for(const r of n){if("complete"===o.type)return!0;if("partial"!==o.type)return!1;{const e=o.diff[r];if(!e)return!1;o=e}}return!0}function d(e,t){if(!e)return!1;if("partial"===e.type){const n=Object.keys(e.diff);return 1===n.length&&n[0]===t}return!1}function h(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&u(e)!==u(t)?{type:"complete",oldValue:e,newValue:t}:f(e,t)}},77725:(e,t,n)=>{n.d(t,{A:()=>b});var o,r=n(35143),l=n(35238),i=n(39356),s=n(45802),a=n(42553),c=n(53084),u=n(46053),f=(n(81806),n(76460),n(28379)),y=n(85842),p=n(17707),d=n(13312),h=n(19902),m=n(44135);const g=new s.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let v=o=class extends a.oY{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const n=d.A.fromJSON(t.spatialReference),o=[];for(let l=0;l<e.length;l++){var r;const t=e[l],s=i.A.fromJSON(t),a=null===(r=t.geometry)||void 0===r?void 0:r.spatialReference;null==s.geometry||a||(s.geometry.spatialReference=n);const c=t.aggregateGeometries,u=s.aggregateGeometries;if(c&&null!=u)for(const e in u){const t=u[e],o=c[e],r=null===o||void 0===o?void 0:o.spatialReference;null==t||r||(t.spatialReference=n)}o.push(s)}return o}writeGeometryType(e,t,n,o){if(e)return void g.write(e,t,n,o);const{features:r}=this;if(r)for(const l of r)if(null!=(null===l||void 0===l?void 0:l.geometry))return void g.write(l.geometry.type,t,n,o)}readQueryGeometry(e,t){if(!e)return null;const n=!!e.spatialReference,o=(0,h.rS)(e);return o&&!n&&t.spatialReference&&(o.spatialReference=d.A.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:n}=this;if(n)for(const o of n)if(o&&null!=o.geometry&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}clone(){return new o(this.cloneProperties())}cloneProperties(){return(0,c.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){const o=t.features[n];if(o.geometry){const t=null===e||void 0===e?void 0:e[n];o.geometry=(null===t||void 0===t?void 0:t.toJSON())||o.geometry}}return t}quantize(e){const{scale:[t,n],translate:[o,r]}=e,l=this.features,i=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-o)/t)),(e=>Math.round((r-e)/n)));for(let s=0,a=l.length;s<a;s++)(null===i||void 0===i?void 0:i(l[s].geometry))||(l.splice(s,1),s--,a--);return this.transform=e,this}unquantize(){var e,t;const{geometryType:n,features:o,transform:r}=this;if(!r)return this;const{translate:[l,i],scale:[s,a]}=r;let c=null,u=null;if(this.hasZ&&null!=(null===r||void 0===r||null===(e=r.scale)||void 0===e?void 0:e[2])){const{translate:[,,e],scale:[,,t]}=r;c=n=>n*t+e}if(this.hasM&&null!=(null===r||void 0===r||null===(t=r.scale)||void 0===t?void 0:t[3])){const{translate:[,,,e],scale:[,,,t]}=r;u=n=>null==n?n:n*t+e}const f=this._getHydrationFunction(n,(e=>e*s+l),(e=>i-e*a),c,u);for(const{geometry:y}of o)null!=y&&f&&f(y);return this.transform=null,this}_quantizePoints(e,t,n){let o,r;const l=[];for(let i=0,s=e.length;i<s;i++){const s=e[i];if(i>0){const e=t(s[0]),i=n(s[1]);e===o&&i===r||(l.push([e-o,i-r]),o=e,r=i)}else o=t(s[0]),r=n(s[1]),l.push([o,r])}return l.length>0?l:null}_getQuantizationFunction(e,t,n){return"point"===e?e=>(e.x=t(e.x),e.y=n(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=(0,h.Bi)(e)?e.rings:e.paths,r=[];for(let l=0,i=o.length;l<i;l++){const e=o[l],i=this._quantizePoints(e,t,n);i&&r.push(i)}return r.length>0?((0,h.Bi)(e)?e.rings=r:e.paths=r,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,n);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,n,o,r){return"point"===e?e=>{e.x=t(e.x),e.y=n(e.y),o&&(e.z=o(e.z))}:"polyline"===e||"polygon"===e?e=>{const l=(0,h.Bi)(e)?e.rings:e.paths;let i,s;for(let o=0,r=l.length;o<r;o++){const e=l[o];for(let o=0,r=e.length;o<r;o++){const r=e[o];o>0?(i+=r[0],s+=r[1]):(i=r[0],s=r[1]),r[0]=t(i),r[1]=n(s)}}if(o&&r)for(let t=0,n=l.length;t<n;t++){const e=l[t];for(let t=0,n=e.length;t<n;t++){const n=e[t];n[2]=o(n[2]),n[3]=r(n[3])}}else if(o)for(let t=0,n=l.length;t<n;t++){const e=l[t];for(let t=0,n=e.length;t<n;t++){const n=e[t];n[2]=o(n[2])}}else if(r)for(let t=0,n=l.length;t<n;t++){const e=l[t];for(let t=0,n=e.length;t<n;t++){const n=e[t];n[2]=r(n[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax),o&&null!=e.zmax&&null!=e.zmin&&(e.zmax=o(e.zmax),e.zmin=o(e.zmin)),r&&null!=e.mmax&&null!=e.mmin&&(e.mmax=r(e.mmax),e.mmin=r(e.mmin))}:"multipoint"===e?e=>{const l=e.points;let i,s;for(let o=0,r=l.length;o<r;o++){const e=l[o];o>0?(i+=e[0],s+=e[1]):(i=e[0],s=e[1]),e[0]=t(i),e[1]=n(s)}if(o&&r)for(let t=0,n=l.length;t<n;t++){const e=l[t];e[2]=o(e[2]),e[3]=r(e[3])}else if(o)for(let t=0,n=l.length;t<n;t++){const e=l[t];e[2]=o(e[2])}else if(r)for(let t=0,n=l.length;t<n;t++){const e=l[t];e[2]=r(e[2])}}:null}};(0,r._)([(0,u.MZ)({type:String,json:{write:!0}})],v.prototype,"displayFieldName",void 0),(0,r._)([(0,u.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"exceededTransferLimit",void 0),(0,r._)([(0,u.MZ)({type:[i.A],json:{write:!0}})],v.prototype,"features",void 0),(0,r._)([(0,f.w)("features")],v.prototype,"readFeatures",null),(0,r._)([(0,u.MZ)({type:[m.A],json:{write:!0}})],v.prototype,"fields",void 0),(0,r._)([(0,u.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],v.prototype,"geometryType",void 0),(0,r._)([(0,p.K)("geometryType")],v.prototype,"writeGeometryType",null),(0,r._)([(0,u.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasM",void 0),(0,r._)([(0,u.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasZ",void 0),(0,r._)([(0,u.MZ)({types:l.yR,json:{write:!0}})],v.prototype,"queryGeometry",void 0),(0,r._)([(0,f.w)("queryGeometry")],v.prototype,"readQueryGeometry",null),(0,r._)([(0,u.MZ)({type:d.A,json:{write:!0}})],v.prototype,"spatialReference",void 0),(0,r._)([(0,p.K)("spatialReference")],v.prototype,"writeSpatialReference",null),(0,r._)([(0,u.MZ)({json:{write:!0}})],v.prototype,"transform",void 0),v=o=(0,r._)([(0,y.$)("esri.rest.support.FeatureSet")],v),v.prototype.toJSON.isDefaultToJSON=!0;const b=v},29632:(e,t,n)=>{n.d(t,{Fe:()=>a,Nk:()=>l});var o=n(69539),r=n(97763);function l(e){const t=[];return i((0,r.lW)(e),t),t.length?new o.A((0,r.e6)(t[0])):null}function i(e,t){var n,o;if(!e)return;let l;l="CIMTextSymbol"===e.type?e.symbol:e;const a="CIMPolygonSymbol"===e.type;if(null!==(n=l)&&void 0!==n&&n.symbolLayers)for(const c of l.symbolLayers)if(!(c.colorLocked||a&&((0,r.mA)(c)||(0,r.MM)(c)&&c.markerPlacement&&(0,r.zr)(c.markerPlacement))))switch(c.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":c.tintColor&&s(t,c.tintColor);break;case"CIMVectorMarker":null===(o=c.markerGraphics)||void 0===o||o.forEach((e=>{i(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":s(t,c.color);break;case"CIMHatchFill":i(c.lineSymbol,t)}}function s(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function a(e,t,n){t instanceof o.A||(t=new o.A(t));const l=(0,r.lW)(e);l&&c(l,t,n)}function c(e,t,n){var o,l,i;if(!e)return;let s;s="CIMTextSymbol"===e.type?e.symbol:e;const a="CIMPolygonSymbol"===(null===(o=s)||void 0===o?void 0:o.type);if(null!==(l=s)&&void 0!==l&&l.symbolLayers)for(const u of s.symbolLayers){if(u.colorLocked)continue;if(a)if(n){const{layersToColor:e}=n;if(((0,r.mA)(u)||(0,r.MM)(u)&&u.markerPlacement&&(0,r.zr)(u.markerPlacement))&&"fill"===e||(0,r.jn)(u)&&"outline"===e)continue}else if((0,r.mA)(u)||(0,r.MM)(u)&&u.markerPlacement&&(0,r.zr)(u.markerPlacement))continue;const e=t.toArray();switch(u.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":u.tintColor=e;break;case"CIMVectorMarker":null===(i=u.markerGraphics)||void 0===i||i.forEach((e=>{c(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":u.color=e;break;case"CIMHatchFill":c(u.lineSymbol,t,n)}}}},87840:(e,t,n)=>{n.d(t,{$4:()=>b,O0:()=>w,O1:()=>k,Sw:()=>M,eH:()=>g,rc:()=>v});var o=n(28899),r=n(69539),l=n(3825),i=n(53521),s=n(76931),a=n(29632);const c="picture-fill",u="simple-fill",f="simple-line",y="simple-marker",p="text",d="cim",h=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),m=new i.q(1e3);function g(e){const t=e.style;let n=null;if(e)switch(e.type){case y:"cross"!==t&&"x"!==t&&(n=e.color);break;case u:t&&"solid"!==t?"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,o.s)("esri/symbols/patterns/".concat(t,".png")),width:5,height:5}):n=e.color;break;case c:n={type:"pattern",src:e.url,width:(0,s.Lz)(e.width)*e.xscale,height:(0,s.Lz)(e.height)*e.yscale,x:(0,s.Lz)(e.xoffset),y:(0,s.Lz)(e.yoffset)};break;case p:n=e.color;break;case d:n=(0,a.Nk)(e)}return n}function v(e,t){const n=e+"-"+t;return void 0!==m.get(n)?Promise.resolve(m.get(n)):(0,l.A)(e,{responseType:"image"}).then((e=>{const o=e.data,r=o.naturalWidth,l=o.naturalHeight,i=document.createElement("canvas");i.width=r,i.height=l;const s=i.getContext("2d");s.fillStyle=t,s.fillRect(0,0,r,l),s.globalCompositeOperation="destination-in",s.drawImage(o,0,0);const a=i.toDataURL();return m.put(n,a),a}))}function b(e){if(!e)return null;let t=null;switch(e.type){case u:case c:case y:t=b(e.outline);break;case f:{const n=(0,s.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:k(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,s.Lz)(e.miterLimit):e.join},t.dashArray=w(t).join(",")||"none");break}default:t=null}return t}function w(e){if(null===e||void 0===e||!e.style)return[];const{dashArray:t,style:n,width:o}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const r=null!==o&&void 0!==o?o:0,l=h.has(n)?h.get(n).map((e=>e*r)):[];if("butt"!==e.cap)for(const[i,s]of l.entries())l[i]=i%2==1?s+r:Math.max(s-r,1);return l}const k=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),M=new r.A([128,128,128])},94439:(e,t,n)=>{n.d(t,{$d:()=>d,GG:()=>S,N7:()=>h,Sx:()=>m,UQ:()=>x,di:()=>z,dt:()=>v,k_:()=>p,yG:()=>A});var o=n(69539),r=n(95444),l=n(98773),i=(n(81806),n(76931)),s=n(9392),a=n(44081),c=n(29632),u=n(87840),f=n(9994);const y=new o.A("white");function p(e){var t;if(!e)return 0;if((0,r.wk)(e)){const t=function(e){var t,n;const o=null===(t=e.symbolLayers)||void 0===t?void 0:t.at(-1);if(o&&"outline"in o)return null===o||void 0===o||null===(n=o.outline)||void 0===n?void 0:n.size}(e);return null!=t?t:0}return(0,i.PN)(null===(t=(0,u.$4)(e))||void 0===t?void 0:t.width)}function d(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function h(e){var t,n;return null!==(t=null===(n=e.resource)||void 0===n?void 0:n.href)&&void 0!==t?t:""}function m(e,t){if(!e)return null;let n=null;return(0,r.wk)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{var t;"object"===e.type&&(null===(t=e.resource)||void 0===t?void 0:t.href)||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new o.A(n):null}(e):(0,r.$y)(e)&&(n="cim"===e.type?(0,c.Nk)(e):e.color?new o.A(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new o.A(n)}function v(e,t,n){e&&(t||null!=n)&&(t&&(t=new o.A(t)),(0,r.wk)(e)?function(e,t,n){const o=e.symbolLayers;if(!o)return;const r=e=>{var o,r;return g(t=null!==(o=null!==(r=t)&&void 0!==r?r:e)&&void 0!==o?o:null!=n?y:null,n)};o.forEach((e=>{var o;if("object"!==e.type||null===(o=e.resource)||void 0===o||!o.href||t)if("water"===e.type)e.color=r(e.color);else{var l;const t=null!=e.material?e.material.color:null,o=r(t);null==e.material?e.material=new f.N({color:o}):e.material.color=o,null!=n&&"outline"in e&&null!=(null===(l=e.outline)||void 0===l?void 0:l.color)&&(e.outline.color=g(e.outline.color,n))}}))}(e,t,n):(0,r.$y)(e)&&function(e,t,n){var o,r;(t=null!==(o=t)&&void 0!==o?o:e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&(null===(r=e.outline)||void 0===r?void 0:r.color)&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function b(e,t){const o=e.symbolLayers;o&&await(0,l.jJ)(o,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=w(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=k(t,s.Un,[e.width,void 0,e.height]);e.width=M(t[0],e.width,1,n),e.height=M(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:o,symbolSize:r}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(4374).then(n.bind(n,44374)),o=await t(e,10),{width:r,height:l,depth:i}=e,s=[r,i,l];let a=1;for(let n=0;n<3;n++){const e=s[n];if(null!=e){a=e/o[n];break}}for(let n=0;n<3;n++)null==s[n]&&(s[n]=o[n]*a);return{resourceSize:o,symbolSize:s}}(e),l=k(t,o,r);e.width=M(t[0],r[0],o[0],l),e.depth=M(t[1],r[1],o[1],l),e.height=M(t[2],r[2],o[2],l)}(e,t)}}(e,t)))}function w(e){for(const t of e)if("number"==typeof t)return t;return null}function k(e,t,n){for(let o=0;o<3;o++){const r=e[o];switch(r){case"symbol-value":{const e=n[o];return null!=e?e/t[o]:1}case"proportional":break;default:if(r&&t[o])return r/t[o]}}return 1}function M(e,t,n,o){switch(e){case"proportional":return n*o;case"symbol-value":return null!=t?t:n;default:return e}}async function x(e,t){if(e&&t)return(0,r.wk)(e)?b(e,t):void((0,r.$y)(e)&&function(e,t){const n=w(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function S(e,t,n){if(e&&null!=t)if((0,r.wk)(e)){const o=e.symbolLayers;o&&o.forEach((e=>{var o,r,l;if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=(null!==(o=e.tilt)&&void 0!==o?o:0)+t;break;case"roll":e.roll=(null!==(r=e.roll)&&void 0!==r?r:0)+t;break;default:e.heading=(null!==(l=e.heading)&&void 0!==l?l:0)+t}}))}else(0,r.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function z(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,a.zu)(t)}async function A(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}}}]);
//# sourceMappingURL=8333.5c78d41c.chunk.js.map